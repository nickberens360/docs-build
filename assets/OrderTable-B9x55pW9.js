import{b as P,c as U,m as x}from"./vuex-D3TwipD2.js";import{_ as K,c as R,e as j,P as q}from"./index-LK9MQE2L.js";import z from"./UserAvatar-7P63MZM0.js";import E from"./ActionMenu-BnUxQ9CM.js";import G from"./AssignOrder-Cq3wmxtM.js";import H from"./StageChip-BefCQc9-.js";import J from"./ProductImageKioskNumber-BWLKfBOU.js";import L from"./MeruDataTable-jf3gvfqw.js";import{b as u,e as n,i as r,J as h,B as p,_ as c,E as X,H as f,C as k,s as S,p as Y,F as A,g as v,A as o}from"./@vue-DNrUJgob.js";import{x as Q,w as _,ai as W,ah as O,a6 as Z,X as $,v as ee}from"./vuetify-BgnNF2O3.js";import{m as V,I as w}from"./date-fns-2ylUqVpG.js";import"./vue-component-docs-plugin-BnqcuvvC.js";import"./vue-router-BVOKdCCq.js";import"./axios-xsH4HHeE.js";import"./axios-cache-interceptor-DgAMPFM2.js";import"./cache-parser-DXYp_BCq.js";import"./fast-defer-9MI9za_P.js";import"./object-code-SBtdq8jY.js";import"./@fortawesome-BWcQmPY7.js";import"./@awesome.me-Btqfd-fw.js";import"./@babel-BTTPuEuv.js";const te={components:{UserAvatar:z,ActionMenu:E,AssignOrder:G,StageChip:H,PaymentType:q,ProductImageKioskNumber:J,MeruDataTable:L},expose:["resetFilters"],props:{orders:{type:Array,required:!0}},data(){return{selectedId:-1,multiSearch:{stage:[],assigneeUsername:[]},sortBy:[{key:"timestamp",order:"desc"}],headers:[{key:"stage",title:"Stage"},{key:"transactionId",title:"Transaction ID"},{key:"kioskNumber",title:"Kiosk #",width:50},{key:"timestamp",title:"Date"},{key:"email",title:"Email"},{key:"name",title:"Name"},{key:"amount",title:"Amount"},{key:"paymentType",title:"Payment Type"},{key:"assigneeUsername",title:"",sortable:!1}]}},computed:{...x("user",["user"]),...x("order",["orderDetails"]),loggedInUserName(){return this.user.username},hasActiveFilters(){return Object.values(this.multiSearch).some(s=>s.length>0)},filteredData(){return Object.keys(this.multiSearch).length?this.orders.filter(s=>Object.entries(this.multiSearch).every(([e,m])=>{if(m.length===0)return!0;if(Array.isArray(m))return e==="assigneeUsername"?m.includes(s[e])||m.includes("unassigned")&&!s[e]:m.includes(s[e])})):this.orders},limitSelectionText(){return"+ "+(this.multiSearch.stage.length-2)+" others"}},methods:{getOrderStageColor:j,getOrderStageName:R,...U("order",["setActiveOrder","setOrderDetails"]),...U("app",["setCardDrawer","resetCardDrawer"]),...P("order",["fetchOrderDetails"]),autoCompleteItems(s){return[...new Set(this.orders.map(l=>l[s]))].filter(l=>l!==void 0).map(l=>{let i=l;return s==="stage"&&(i=this.getOrderStageName(l)),{title:i,value:l}})},removeActiveFilter(s,e){this.multiSearch[s].splice(e,1)},resetFilters(){this.multiSearch={stage:[],assigneeUsername:[]}},async setActiveRow(s,e){e=e.item,this.resetCardDrawer();let m=["OrderCardDetails","CustomerCard","OrderCardTracking"];this.setActiveOrder(null),this.setOrderDetails(null),this.setActiveOrder(e),await this.fetchOrderDetails(e.sessionId).then(l=>{var i;(i=l==null?void 0:l.items)!=null&&i.some(a=>a.type==="CK")&&m.splice(1,0,"KeySkuCard")}),this.setCardDrawer({isShown:!0,components:m,headerVariant:"order",secondaryComponents:["OrderActivity"]})},formatDate(s){return V(w(s),"MM/dd/yyyy")},formatTime(s){return V(w(s),"h:mm a")},assignMenuTitle(s){return s?`Assigned To: ${s==null?void 0:s.toUpperCase()}`:"Unassigned"}}},se={key:1,class:"text-primary-darken-2 text-caption align-self-center"},re={class:"font-weight-bold"},ae={key:0},ie={key:1};function ne(s,e,m,l,i,a){const b=c("StageChip"),D=c("ProductImageKioskNumber"),T=c("PaymentType"),N=c("UserAvatar"),I=c("AssignOrder"),F=c("ActionMenu"),M=c("MeruDataTable");return o(),u("div",null,[n(M,{"sort-by":i.sortBy,"onUpdate:sortBy":e[6]||(e[6]=t=>i.sortBy=t),headers:i.headers,items:a.filteredData,class:"elevation-0 on-surface-high-contrast-text","items-per-page":"-1","hide-default-footer":"","onClick:row":a.setActiveRow},{top:r(()=>[n(Q,{class:"bg-surface-variant px-4 ma-0 py-sm-2 pt-4",justify:"start",align:"center","no-gutters":""},{default:r(()=>[n(_,{cols:"12",sm:"5",class:"d-flex align-center pr-sm-4"},{default:r(()=>[e[7]||(e[7]=p("p",{class:"font-weight-bold mr-2"}," Filter Results: ",-1)),n(W,{modelValue:i.multiSearch.stage,"onUpdate:modelValue":e[0]||(e[0]=t=>i.multiSearch.stage=t),items:a.autoCompleteItems("stage"),label:"Stage","bg-color":"surface",variant:"outlined",density:"compact","hide-details":"",clearable:"",multiple:"",chips:""},{chip:r(({props:t,item:d,index:y})=>[y<2?(o(),k(b,Y({key:0},t,{stage:d.value}),null,16,["stage"])):S("",!0),y===2&&i.multiSearch.stage.length?(o(),u("span",se,f(a.limitSelectionText),1)):S("",!0)]),_:1},8,["modelValue","items"])]),_:1,__:[7]}),n(_,{cols:"12",sm:"7",class:"d-flex align-center"},{default:r(()=>[n(O,{modelValue:i.multiSearch.assigneeUsername,"onUpdate:modelValue":e[1]||(e[1]=t=>i.multiSearch.assigneeUsername=t),value:a.loggedInUserName,"hide-details":"",color:"primary",multiple:"",inline:""},{label:r(()=>e[8]||(e[8]=[p("span",{class:"text-body-4 font-weight-bold"},"Orders Assigned to Me",-1)])),_:1},8,["modelValue","value"]),n(O,{modelValue:i.multiSearch.assigneeUsername,"onUpdate:modelValue":e[2]||(e[2]=t=>i.multiSearch.assigneeUsername=t),value:"unassigned","hide-details":"",color:"primary",multiple:"",inline:""},{label:r(()=>e[9]||(e[9]=[p("span",{class:"text-body-4 font-weight-bold"},"Unassigned Orders",-1)])),_:1},8,["modelValue"])]),_:1})]),_:1}),n(Z,null,{default:r(()=>[a.hasActiveFilters?(o(),k($,{key:0,class:"d-flex pa-4 align-center",color:"surface-light"},{default:r(()=>[p("a",{role:"button",class:"mr-4 text-capitalize text-info text-decoration-underline font-weight-medium",onClick:e[3]||(e[3]=(...t)=>a.resetFilters&&a.resetFilters(...t))}," Clear Filters "),(o(!0),u(A,null,v(i.multiSearch,(t,d,y)=>(o(),u("div",{key:y},[d==="stage"?(o(!0),u(A,{key:0},v(t,(C,g)=>(o(),k(b,{key:g,stage:C,"append-icon":"fas fa-circle-xmark",class:"mr-4",onClick:B=>a.removeActiveFilter(d,g)},null,8,["stage","onClick"]))),128)):(o(!0),u(A,{key:1},v(t,(C,g)=>(o(),k(ee,{key:g,size:"small","append-icon":"fas fa-circle-xmark",class:"mr-4",color:"teal",onClick:B=>a.removeActiveFilter(d,g)},{default:r(()=>[h(f(C),1)]),_:2},1032,["onClick"]))),128))]))),128))]),_:1})):S("",!0)]),_:1})]),"item.stage":r(({item:t})=>[n(b,{stage:t.stage},null,8,["stage"])]),"item.kioskNumber":r(({item:t})=>[n(D,{"kiosk-number":t.kioskNumber,status:t.processorStatus,"product-color-one":"#1e5799","product-color-two":"#7db9e8"},null,8,["kiosk-number","status"])]),"item.amount":r(({item:t})=>[h(f(s.$filters.currency(t.amount)),1)]),"item.timestamp":r(({item:t})=>[p("span",re,f(a.formatDate(t.timestamp)),1),h(" "+f(a.formatTime(t.timestamp)),1)]),"item.paymentType":r(({item:t})=>[n(T,{"card-number":t.pan,"layout-type":"chip","pan-length":"truncated","payment-type":t.paymentType},null,8,["card-number","payment-type"])]),"item.assigneeUsername":r(({item:t})=>[n(F,{title:a.assignMenuTitle(t.assigneeUsername),class:"d-inline-block",onClick:e[4]||(e[4]=X(()=>{},["stop"]))},{activator:r(()=>[n(N,{"user-name":t.assigneeUsername,class:"d-inline-block"},null,8,["user-name"])]),content:r(({closeMenu:d})=>[n(I,{"session-id":t.sessionId,"assigned-to":t.assigneeUsername,onAssignComplete:d},null,8,["session-id","assigned-to","onAssignComplete"])]),_:2},1032,["title"])]),"no-data":r(()=>[a.hasActiveFilters?(o(),u("div",ae,[e[10]||(e[10]=h(" No Filter Results. ")),p("a",{role:"button",class:"ml-2 text-capitalize text-info text-decoration-underline font-weight-bold",onClick:e[5]||(e[5]=(...t)=>a.resetFilters&&a.resetFilters(...t))}," Clear Filters ")])):(o(),u("p",ie," No Orders Found "))]),_:2},1032,["sort-by","headers","items","onClick:row"])])}const Ve=K(te,[["render",ne],["__scopeId","data-v-e8a01951"]]);export{Ve as default};
