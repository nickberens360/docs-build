import{c as A,m as S}from"./vuex-BwOdvJvI.js";import{_ as T,e as w,f as V,h as k}from"./index-AG15HfzG.js";import B from"./DetailsListItem-BL1J9rZT.js";import{a4 as O,i as m,A as g,d as D}from"./vuetify-BymGJ7fC.js";import{b as n,B as i,e as a,s as c,C as y,i as d,F as I,g as b,J as p,H as u,_ as x,A as l,x as E}from"./@vue-mGKKYCuj.js";import"./date-fns-Cq_iz7V_.js";import"./@babel-BTTPuEuv.js";import"./vue-component-docs-plugin-CX_tIU2Y.js";import"./vue-router-CgUA7A7W.js";import"./axios-xsH4HHeE.js";import"./axios-cache-interceptor-DgAMPFM2.js";import"./cache-parser-DXYp_BCq.js";import"./fast-defer-9MI9za_P.js";import"./object-code-SBtdq8jY.js";import"./@fortawesome-C0fAH5tI.js";import"./@awesome.me-Btqfd-fw.js";import"./ItemRefundDetails-B12pG--e.js";import"./ProductImage-CHQgULCi.js";const F={components:{DetailsListItem:B},props:{refundable:{type:Boolean,default:()=>!1}},data(){return{isRefundAllSelected:!1}},computed:{...S({order:"order/orderDetails",selectedItems:"order/selectedItems",refundableItems:"order/getRefundableItems",orderHasShipping:"order/getOrderHasShipping",shippingAlreadyRefunded:"order/getHasShippingBeenRefunded"}),machineTypeIsRefundEligible(){return k(this.order.session.kioskNumber)},hideActionBar(){return this.refundableItems.length===0},isShippingRefunded(){return this.orderHasShipping&&this.shippingAlreadyRefunded},numberItemsInOrder(){var t;let e=0;return(t=this.order)==null||t.items.forEach(o=>e+=o.quantity),e},orderTotals(){let e=[{title:"Shipping",value:this.order.payment.shippingTotal||0,showValueAsRed:this.isShippingRefunded},{title:"Subtotal",value:this.order.payment.subTotal,showValueAsRed:!1},{title:"Taxes",value:this.order.payment.tax,showValueAsRed:!1},{title:"Discounts",value:this.discountAmount,showValueAsRed:this.discountAmount>0},{title:"Total",value:this.determineTotal,showValueAsRed:!1}];return this.order.payment.type==="cash"&&e.splice(2,1),e},discountAmount(){let e=this.order.items.reduce((t,o)=>t+o.discountTotal*o.quantity,0);return this.order.payment.couponTotal||e},determineTotal(){return this.order.payment.paidTotal>0?this.order.payment.paidTotal:this.order.stage==="voided"?0:this.order.payment.total},allowRefund(){return V(this.order.payment.type)&&this.machineTypeIsRefundEligible},isFulfillableOrder(){return this.getIsFulfillableOrder(this.order)}},methods:{...A({setSelectedItems:"order/setSelectedItems"}),getIsFulfillableOrder:w,selectAll(){this.selectedItems.length<this.refundableItems.length?this.setSelectedItems(this.refundableItems.slice()):this.setSelectedItems([])}}},C={class:"fill-height d-flex flex-column justify-space-between pb-0"},H={class:"toolbar-header bg-surface elevation-3"},L={class:"ml-4 on-surface-low-contrast-text text-body-1"},N={class:"ml-1 text-error-lighten-1 text-body-1"},q={key:0,class:"d-flex py-4 align-center on-surface-low-contrast-text text-caption-2"},z={key:0,class:"detail-list-footer bg-surface elevation-6"},j={class:"d-flex align-center py-4 px-8 justify-end"};function M(e,t,o,G,J,s){var f,h;const _=x("DetailsListItem"),v=x("VBtnSecondary");return l(),n("div",C,[i("div",null,[i("div",H,[a(g,{density:"compact",class:"flex-grow-0 elevation-0 px-4"},{default:d(()=>[a(O,{color:"primary",inline:"",rounded:"",content:s.numberItemsInOrder},null,8,["content"]),t[1]||(t[1]=i("span",{class:"text-h4 ml-4 on-surface-low-contrast-text font-weight-medium"},"Items",-1)),a(m),(l(!0),n(I,null,b(s.orderTotals,(r,R)=>(l(),n("div",{key:R,class:"ml-8"},[i("span",L,u(r.title),1),i("span",N,u(r.title==="Shipping"&&s.isShippingRefunded?"(Refunded)":""),1),i("span",{class:E(["ml-3 text-body-1 font-weight-bold",r.showValueAsRed?"text-error":"on-surface-high-contrast-text"])},u(e.$filters.currency(r.value)),3)]))),128))]),_:1,__:[1]}),!s.hideActionBar||!s.machineTypeIsRefundEligible?(l(),y(g,{key:0,density:"compact",color:"surface-variant",class:"flex-grow-0 elevation-0 px-4",height:"62px"},{default:d(()=>[a(m),s.allowRefund?(l(),n("div",q,[t[2]||(t[2]=p(" Refund All ")),a(D,{size:"40",color:"primary-lighten-2",class:"ml-5",onClick:t[0]||(t[0]=r=>s.selectAll())},{default:d(()=>[p(u(e.selectedItems.length===e.refundableItems.length?"$checkSquare":"$checkboxOff"),1)]),_:1})])):c("",!0)]),_:1})):c("",!0)]),i("div",null,[(l(!0),n(I,null,b(e.order.items,r=>(l(),y(_,{key:r.itemId,item:r},null,8,["item"]))),128))])]),a(m),s.isFulfillableOrder?(l(),n("div",z,[i("div",j,[a(v,{to:{name:"fulfillmentDetails",params:{sessionId:(h=(f=e.order)==null?void 0:f.session)==null?void 0:h.sessionId}}},{default:d(()=>t[3]||(t[3]=[p(" Fulfillment View ")])),_:1,__:[3]},8,["to"])])])):c("",!0)])}const de=T(F,[["render",M],["__scopeId","data-v-e0c10c09"]]);export{de as default};
