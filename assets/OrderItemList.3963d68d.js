import{a as R,c as w}from"./vuex.0eb68a2c.js";import{f as A,h as T,i as V,_ as k}from"./index.8a58b007.js";import B from"./DetailsListItem.22a8aab7.js";import{ab as O,i as u,A as g,c as D}from"./vuetify.65d833ec.js";import{S as y,e as r,f as o,E as i,g as a,k as d,G as I,j as _,x as b,J as m,I as c,z as p,B as E,aj as F,ak as L}from"./@vue.ee679632.js";import"./date-fns.d38e1d55.js";import"./vue-atomic-docs.4f3653eb.js";import"./vue-router.ec64e966.js";import"./axios.eca6faa7.js";import"./axios-cache-interceptor.0956cad0.js";import"./cache-parser.124ebbb8.js";import"./fast-defer.b34f24de.js";import"./object-code.c2755e43.js";import"./@fortawesome.2cecc5e3.js";import"./@awesome.me.7dae7d79.js";import"./ItemRefundDetails.53b8a1bf.js";import"./ProductImage.3e5aeb25.js";const C={components:{DetailsListItem:B},props:{refundable:{type:Boolean,default:()=>!1}},data(){return{isRefundAllSelected:!1}},computed:{...R({order:"order/orderDetails",selectedItems:"order/selectedItems",refundableItems:"order/getRefundableItems",orderHasShipping:"order/getOrderHasShipping",shippingAlreadyRefunded:"order/getHasShippingBeenRefunded"}),machineTypeIsRefundEligible(){return A(this.order.session.kioskNumber)},hideActionBar(){return this.refundableItems.length===0},isShippingRefunded(){return this.orderHasShipping&&this.shippingAlreadyRefunded},numberItemsInOrder(){var l;let e=0;return(l=this.order)==null||l.items.forEach(n=>e+=n.quantity),e},orderTotals(){let e=[{title:"Shipping",value:this.order.payment.shippingTotal||0,showValueAsRed:this.isShippingRefunded},{title:"Subtotal",value:this.order.payment.subTotal,showValueAsRed:!1},{title:"Taxes",value:this.order.payment.tax,showValueAsRed:!1},{title:"Discounts",value:this.discountAmount,showValueAsRed:this.discountAmount>0},{title:"Total",value:this.determineTotal,showValueAsRed:!1}];return this.order.payment.type==="cash"&&e.splice(2,1),e},discountAmount(){let e=this.order.items.reduce((l,n)=>l+n.discountTotal*n.quantity,0);return this.order.payment.couponTotal||e},determineTotal(){return this.order.payment.paidTotal>0?this.order.payment.paidTotal:this.order.stage==="voided"?0:this.order.payment.total},allowRefund(){return T(this.order.payment.type)&&this.machineTypeIsRefundEligible},isFulfillableOrder(){return this.getIsFulfillableOrder(this.order)}},methods:{...w({setSelectedItems:"order/setSelectedItems"}),getIsFulfillableOrder:V,selectAll(){this.selectedItems.length<this.refundableItems.length?this.setSelectedItems(this.refundableItems.slice()):this.setSelectedItems([])}}},N=e=>(F("data-v-e0c10c09"),e=e(),L(),e),j={class:"fill-height d-flex flex-column justify-space-between pb-0"},z={class:"toolbar-header bg-surface elevation-3"},H=N(()=>i("span",{class:"text-h4 ml-4 on-surface-low-contrast-text font-weight-medium"},"Items",-1)),q={class:"ml-4 on-surface-low-contrast-text text-body-1"},G={class:"ml-1 text-error-lighten-1 text-body-1"},M={key:0,class:"d-flex py-4 align-center on-surface-low-contrast-text text-caption-2"},J={key:0,class:"detail-list-footer bg-surface elevation-6"},P={class:"d-flex align-center py-4 px-8 justify-end"};function K(e,l,n,Q,U,t){var h,f;const v=y("DetailsListItem"),x=y("VBtnSecondary");return r(),o("div",j,[i("div",null,[i("div",z,[a(g,{density:"compact",class:"flex-grow-0 elevation-0 px-4"},{default:d(()=>[a(O,{color:"primary",inline:"",rounded:"",content:t.numberItemsInOrder},null,8,["content"]),H,a(u),(r(!0),o(I,null,_(t.orderTotals,(s,S)=>(r(),o("div",{key:S,class:"ml-8"},[i("span",q,c(s.title),1),i("span",G,c(s.title==="Shipping"&&t.isShippingRefunded?"(Refunded)":""),1),i("span",{class:E(["ml-3 text-body-1 font-weight-bold",s.showValueAsRed?"text-error":"on-surface-high-contrast-text"])},c(e.$filters.currency(s.value)),3)]))),128))]),_:1}),!t.hideActionBar||!t.machineTypeIsRefundEligible?(r(),b(g,{key:0,density:"compact",color:"surface-variant",class:"flex-grow-0 elevation-0 px-4",height:"62px"},{default:d(()=>[a(u),t.allowRefund?(r(),o("div",M,[m(" Refund All "),a(D,{size:"40",color:"primary-lighten-2",class:"ml-5",onClick:l[0]||(l[0]=s=>t.selectAll())},{default:d(()=>[m(c(e.selectedItems.length===e.refundableItems.length?"$checkSquare":"$checkboxOff"),1)]),_:1})])):p("",!0)]),_:1})):p("",!0)]),i("div",null,[(r(!0),o(I,null,_(e.order.items,s=>(r(),b(v,{key:s.itemId,item:s},null,8,["item"]))),128))])]),a(u),t.isFulfillableOrder?(r(),o("div",J,[i("div",P,[a(x,{to:{name:"fulfillmentDetails",params:{sessionId:(f=(h=e.order)==null?void 0:h.session)==null?void 0:f.sessionId}}},{default:d(()=>[m(" Fulfillment View ")]),_:1},8,["to"])])])):p("",!0)])}const me=k(C,[["render",K],["__scopeId","data-v-e0c10c09"]]);export{me as default};
