import{_ as z,P as $,S as j,y as X,C as q,z as G,O as J,B as K,D as U,i as Q}from"./index-LK9MQE2L.js";import{b as W,c as Y,m as A}from"./vuex-D3TwipD2.js";import Z from"./RefundForm-BUlmK7tw.js";import ee from"./DetailsHeader-B_x98Ur9.js";import te from"./OrderItemList-BoBKyMAw.js";import se from"./FullScreenLayout-C65u71bY.js";import{x as I,d as T,i as ae,w as S,f as w,aB as V,X as oe,l as ie}from"./vuetify-BgnNF2O3.js";import{I as ne,m as re}from"./date-fns-2ylUqVpG.js";import{C as h,i as s,e as t,b as le,s as f,_ as r,B as o,x as k,J as m,H as c,A as p}from"./@vue-DNrUJgob.js";import"./vue-component-docs-plugin-BnqcuvvC.js";import"./vue-router-BVOKdCCq.js";import"./axios-xsH4HHeE.js";import"./axios-cache-interceptor-DgAMPFM2.js";import"./cache-parser-DXYp_BCq.js";import"./fast-defer-9MI9za_P.js";import"./object-code-SBtdq8jY.js";import"./@fortawesome-BWcQmPY7.js";import"./@awesome.me-Btqfd-fw.js";import"./@babel-BTTPuEuv.js";import"./RefundFormItem-Zt-eDRh4.js";import"./DetailsListItem-D0egfgv3.js";import"./ItemRefundDetails-CYxzYO0L.js";import"./ProductImage-CvO1b8Ha.js";const de={components:{CustomerShippingAddress:U,TopCurtain:K,OrderCardTracking:J,CardBase:G,CardItem:q,CardRow:X,SuccessAnimation:j,RefundForm:Z,DetailsHeader:ee,OrderItemList:te,PaymentType:$,FullScreenLayout:se},props:{refundable:{type:Boolean,required:!1}},data(){return{isRefundFormVisible:!1,isSuccessAnimationShown:!1,loading:!1,refundTotal:0}},computed:{...A("order",["orderDetails","selectedItems","shipmentActivity"]),...A("app",["getTopCurtain"]),machineTypeIsRefundEligible(){return Q(this.orderDetails.session.kioskNumber)},isTextReceiptEnabled(){var e;return!((e=this.orderDetails)!=null&&e.session.kioskNumber.toLowerCase().includes("x"))},transactionDate(){const e=ne(this.orderDetails.payment.timestamp);return re(e,"EE MM/dd/yyyy h:mm a")}},async mounted(){this.setSelectedItems([]),this.loading=!0,await this.fetchOrderDetails(this.$route.params.order),this.loading=!1},methods:{...Y({setCardDrawer:"app/setCardDrawer",setSelectedItems:"order/setSelectedItems"}),...W({fetchOrderDetails:"order/fetchOrderDetails"}),handleClose(){this.$router.push({name:"orderManagement"})},handleCouponClick(){var e,a,u,_,d,i;this.$store.dispatch("app/setTopCurtain",{isShown:!0,component:"CouponForms",componentProps:{name:((a=(e=this.orderDetails)==null?void 0:e.customer)==null?void 0:a.name)||"",phone:((_=(u=this.orderDetails)==null?void 0:u.customer)==null?void 0:_.phoneNumber)||"",email:((i=(d=this.orderDetails)==null?void 0:d.customer)==null?void 0:i.email)||"",isTextReceiptEnabled:this.isTextReceiptEnabled}})},handleAnimationComplete(){this.isSuccessAnimationShown=!1},handleReceiptClick(){var e,a,u,_,d,i;this.isSuccessAnimationShown=!1,this.$store.dispatch("app/setTopCurtain",{isShown:!0,component:"ReceiptForms",componentProps:{name:((a=(e=this.orderDetails)==null?void 0:e.customer)==null?void 0:a.name)||"",phone:((_=(u=this.orderDetails)==null?void 0:u.customer)==null?void 0:_.phoneNumber)||"",email:((i=(d=this.orderDetails)==null?void 0:d.customer)==null?void 0:i.email)||"",isTextReceiptEnabled:this.isTextReceiptEnabled}})},handleCancelReceiptClick(){this.isSuccessAnimationShown=!1},async handleRefundConfirmed(e){this.refundTotal=e,this.isSuccessAnimationShown=!0,this.setSelectedItems([])}}},me={key:0,class:"screen"},ce={class:"screen-item top mb-2"},pe={class:"card-item-list"},ue={class:"d-flex align-center"},he={class:"d-flex align-center"},fe=["href"],_e={class:"card-item-list coupon-group"},Ce={class:"d-flex align-end"},ye={class:"has-badge text-h6 line-height-1"},ge={class:"card-item-list"},be={href:"#",class:"text-decoration-none"},De={class:"text-md-body-5 mb-1 mt-2 font-weight-medium"},Se={class:"overflow-container"},ve={class:"mb-6"},Te={class:"font-weight-bold"},we={class:"font-weight-bold"};function ke(e,a,u,_,d,i){const O=r("DetailsHeader"),B=r("TopCurtain"),E=r("CustomerShippingAddress"),C=r("CardItem"),v=r("CardRow"),N=r("PaymentType"),P=r("VBtnSecondary"),R=r("CardBase"),F=r("OrderCardTracking"),L=r("OrderItemList"),x=r("RefundForm"),M=r("SuccessAnimation"),H=r("FullScreenLayout");return p(),h(H,{"no-content-padding":""},{header:s(()=>[e.orderDetails?(p(),h(O,{key:0,"transaction-id":e.orderDetails.transactionId,stage:e.orderDetails.stage,onCloseOrderDialog:i.handleClose},null,8,["transaction-id","stage","onCloseOrderDialog"])):f("",!0)]),default:s(()=>[t(B),e.orderDetails?(p(),le("div",me,[o("div",ce,[d.loading?f("",!0):(p(),h(I,{key:0,justify:"start",class:k(["ma-0 py-4 position-relative",{"blur-overlay-active":e.getTopCurtain.isShown}])},{default:s(()=>[t(S,{cols:"4"},{default:s(()=>[t(R,{elevation:"0"},{cardTitle:s(()=>{var n,l;return[m(c(((l=(n=e.orderDetails)==null?void 0:n.customer)==null?void 0:l.name)||"Name data unavailable"),1)]}),cardContent:s(()=>[t(v,null,{default:s(()=>[t(C,{title:"Shipping Address"},{itemContent:s(()=>[t(E,{"shipping-address":e.orderDetails.shippingAddress},null,8,["shipping-address"])]),_:1}),t(C,{title:"Contact Info"},{itemContent:s(()=>{var n,l,y,g,b,D;return[o("ul",pe,[o("li",ue,[t(T,{class:"mr-2 icon-16",color:"primary"},{default:s(()=>a[1]||(a[1]=[m(" $circlePhone ")])),_:1,__:[1]}),m(" "+c(((l=(n=e.orderDetails)==null?void 0:n.customer)==null?void 0:l.phoneNumber)||"Phone data unavailable"),1)]),o("li",he,[t(T,{class:"mr-2 icon-16",color:"primary"},{default:s(()=>a[2]||(a[2]=[m(" $at ")])),_:1,__:[2]}),o("a",{href:`mailto:${((g=(y=e.orderDetails)==null?void 0:y.customer)==null?void 0:g.email)||"#"} `},c(((D=(b=e.orderDetails)==null?void 0:b.customer)==null?void 0:D.email)||"Email data unavailable"),9,fe)])])]}),_:1})]),_:1}),t(v,{align:"end"},{default:s(()=>[t(C,{title:"Payment"},{itemContent:s(()=>{var n,l;return[t(N,{"card-number":(n=e.orderDetails.payment.card)==null?void 0:n.pan,"card-type":(l=e.orderDetails.payment.card)==null?void 0:l.issuer,"payment-type":e.orderDetails.payment.type},null,8,["card-number","card-type","payment-type"])]}),_:1}),t(ae),t(C,null,{itemContent:s(()=>[o("ul",_e,[o("li",Ce,[i.machineTypeIsRefundEligible?(p(),h(P,{key:0,size:"large",class:"ml-4 text-body-4",onClick:i.handleReceiptClick},{default:s(()=>[t(T,{class:"mr-2 text-body-1"},{default:s(()=>a[3]||(a[3]=[m(" $paperPlane ")])),_:1,__:[3]}),a[4]||(a[4]=m(" Send Receipt "))]),_:1,__:[4]},8,["onClick"])):f("",!0)])])]),_:1})]),_:1})]),_:1})]),_:1}),t(w,{vertical:""}),t(S,{cols:"4"},{default:s(()=>[t(R,{elevation:"0"},{cardContent:s(()=>[t(v,{class:"mb-5"},{default:s(()=>[t(C,{title:"Transaction Date"},{itemContent:s(()=>[o("h3",ye,c(i.transactionDate.toUpperCase()),1)]),_:1})]),_:1}),t(v,{align:"end"},{default:s(()=>[t(C,{title:"Transaction Location"},{itemContent:s(()=>{var n,l,y,g,b,D;return[o("ul",ge,[o("li",null,[o("a",be,c(((l=(n=e.orderDetails)==null?void 0:n.session)==null?void 0:l.kioskNumber)||"Kiosk number unavailable"),1)]),o("li",De,c(((g=(y=e.orderDetails)==null?void 0:y.session)==null?void 0:g.storeName)||"Store name unavailable"),1),o("li",null,c(((D=(b=e.orderDetails)==null?void 0:b.session)==null?void 0:D.storeAddress)||"Store Address unavailable"),1)])]}),_:1})]),_:1})]),_:1})]),_:1}),t(w,{vertical:""}),t(S,{cols:"4"},{default:s(()=>[t(F,{class:"pa-0",elevation:"0"})]),_:1})]),_:1},8,["class"])),t(w,{class:k({"blur-overlay-active":e.getTopCurtain.isShown})},null,8,["class"])]),o("div",{class:k(["screen-item bottom flex-grow-1 mx-2",{"blur-overlay-active":e.getTopCurtain.isShown}])},[t(I,{class:"fill-height","no-gutters":""},{default:s(()=>[t(S,{cols:"8",class:"d-flex flex-column pr-1 position-relative list-container"},{default:s(()=>[o("div",Se,[t(L,{refundable:u.refundable},null,8,["refundable"])])]),_:1}),i.machineTypeIsRefundEligible?(p(),h(S,{key:0,cols:"4",class:"position-relative form-container"},{default:s(()=>[t(V,null,{default:s(()=>[e.selectedItems.length>0?(p(),h(oe,{key:0,color:"surface-light",class:"overflow-container visible details-form"},{default:s(()=>[t(x,{class:"position-relative fill-height",onRefunded:a[0]||(a[0]=n=>i.handleRefundConfirmed(n))})]),_:1})):f("",!0)]),_:1}),t(V,null,{default:s(()=>[d.isSuccessAnimationShown?(p(),h(ie,{key:0,color:"transparent",class:"fill-height position-relative elevation-0 d-flex flex-column justify-center align-center"},{default:s(()=>[t(M,{class:"position-relative w-100 top-n10","icon-primary":"$duoToneCircleDollar",onAnimationComplete:i.handleAnimationComplete},{message:s(()=>[o("div",ve,[o("span",Te,c(e.$filters.currency(d.refundTotal)),1),a[5]||(a[5]=m(" has been ")),a[6]||(a[6]=o("span",{class:"font-weight-bold"},"refunded",-1)),a[7]||(a[7]=m(" to ")),o("span",we,c(e.orderDetails.customer.name),1),a[8]||(a[8]=m(". "))])]),_:1},8,["onAnimationComplete"])]),_:1})):f("",!0)]),_:1})]),_:1})):f("",!0)]),_:1})],2)])):f("",!0)]),_:1})}const Qe=z(de,[["render",ke],["__scopeId","data-v-5aa76522"]]);export{Qe as default};
