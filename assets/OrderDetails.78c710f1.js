import{_ as j,y as H,z as $,O as q,B as X,C as G,D as J,S as K,P as U,f as Q}from"./index.8a58b007.js";import{a as I,c as W,b as Y}from"./vuex.0eb68a2c.js";import Z from"./RefundForm.4669f939.js";import ee from"./DetailsHeader.5287640a.js";import te from"./OrderItemList.3963d68d.js";import se from"./FullScreenLayout.0d0fe126.js";import{x as A,c as T,i as ae,w as D,f as w,aB as O,X as oe,q as ie}from"./vuetify.65d833ec.js";import{p as ne,f as re}from"./date-fns.d38e1d55.js";import{S as n,e as p,x as h,k as s,z as f,g as t,f as le,E as a,B as k,J as d,I as c,aj as de,ak as ce}from"./@vue.ee679632.js";import"./vue-atomic-docs.4f3653eb.js";import"./vue-router.ec64e966.js";import"./axios.eca6faa7.js";import"./axios-cache-interceptor.0956cad0.js";import"./cache-parser.124ebbb8.js";import"./fast-defer.b34f24de.js";import"./object-code.c2755e43.js";import"./@fortawesome.2cecc5e3.js";import"./@awesome.me.7dae7d79.js";import"./RefundFormItem.141f44e7.js";import"./DetailsListItem.22a8aab7.js";import"./ItemRefundDetails.53b8a1bf.js";import"./ProductImage.3e5aeb25.js";const me={components:{CustomerShippingAddress:H,TopCurtain:$,OrderCardTracking:q,CardBase:X,CardItem:G,CardRow:J,SuccessAnimation:K,RefundForm:Z,DetailsHeader:ee,OrderItemList:te,PaymentType:U,FullScreenLayout:se},props:{refundable:{type:Boolean,required:!1}},data(){return{isRefundFormVisible:!1,isSuccessAnimationShown:!1,loading:!1,refundTotal:0}},computed:{...I("order",["orderDetails","selectedItems","shipmentActivity"]),...I("app",["getTopCurtain"]),machineTypeIsRefundEligible(){return Q(this.orderDetails.session.kioskNumber)},isTextReceiptEnabled(){var e;return!((e=this.orderDetails)!=null&&e.session.kioskNumber.toLowerCase().includes("x"))},transactionDate(){const e=ne(this.orderDetails.payment.timestamp);return re(e,"EE MM/dd/yyyy h:mm a")}},async mounted(){this.setSelectedItems([]),this.loading=!0,await this.fetchOrderDetails(this.$route.params.order),this.loading=!1},methods:{...W({setCardDrawer:"app/setCardDrawer",setSelectedItems:"order/setSelectedItems"}),...Y({fetchOrderDetails:"order/fetchOrderDetails"}),handleClose(){this.$router.push({name:"orderManagement"})},handleCouponClick(){var e,m,u,_,l,o;this.$store.dispatch("app/setTopCurtain",{isShown:!0,component:"CouponForms",componentProps:{name:((m=(e=this.orderDetails)==null?void 0:e.customer)==null?void 0:m.name)||"",phone:((_=(u=this.orderDetails)==null?void 0:u.customer)==null?void 0:_.phoneNumber)||"",email:((o=(l=this.orderDetails)==null?void 0:l.customer)==null?void 0:o.email)||"",isTextReceiptEnabled:this.isTextReceiptEnabled}})},handleAnimationComplete(){this.isSuccessAnimationShown=!1},handleReceiptClick(){var e,m,u,_,l,o;this.isSuccessAnimationShown=!1,this.$store.dispatch("app/setTopCurtain",{isShown:!0,component:"ReceiptForms",componentProps:{name:((m=(e=this.orderDetails)==null?void 0:e.customer)==null?void 0:m.name)||"",phone:((_=(u=this.orderDetails)==null?void 0:u.customer)==null?void 0:_.phoneNumber)||"",email:((o=(l=this.orderDetails)==null?void 0:l.customer)==null?void 0:o.email)||"",isTextReceiptEnabled:this.isTextReceiptEnabled}})},handleCancelReceiptClick(){this.isSuccessAnimationShown=!1},async handleRefundConfirmed(e){this.refundTotal=e,this.isSuccessAnimationShown=!0,this.setSelectedItems([])}}},pe=e=>(de("data-v-5aa76522"),e=e(),ce(),e),ue={key:0,class:"screen"},he={class:"screen-item top mb-2"},fe={class:"card-item-list"},_e={class:"d-flex align-center"},Ce={class:"d-flex align-center"},ye=["href"],ge={class:"card-item-list coupon-group"},be={class:"d-flex align-end"},Se={class:"has-badge text-h6 line-height-1"},De={class:"card-item-list"},ve={href:"#",class:"text-decoration-none"},Te={class:"text-md-body-5 mb-1 mt-2 font-weight-medium"},we={class:"overflow-container"},ke={class:"mb-6"},Re={class:"font-weight-bold"},Ie=pe(()=>a("span",{class:"font-weight-bold"},"refunded",-1)),Ae={class:"font-weight-bold"};function Oe(e,m,u,_,l,o){const V=n("DetailsHeader"),E=n("TopCurtain"),B=n("CustomerShippingAddress"),C=n("CardItem"),v=n("CardRow"),N=n("PaymentType"),P=n("VBtnSecondary"),R=n("CardBase"),F=n("OrderCardTracking"),L=n("OrderItemList"),x=n("RefundForm"),M=n("SuccessAnimation"),z=n("FullScreenLayout");return p(),h(z,{"no-content-padding":""},{header:s(()=>[e.orderDetails?(p(),h(V,{key:0,"transaction-id":e.orderDetails.transactionId,stage:e.orderDetails.stage,onCloseOrderDialog:o.handleClose},null,8,["transaction-id","stage","onCloseOrderDialog"])):f("",!0)]),default:s(()=>[t(E),e.orderDetails?(p(),le("div",ue,[a("div",he,[l.loading?f("",!0):(p(),h(A,{key:0,justify:"start",class:k(["ma-0 py-4 position-relative",{"blur-overlay-active":e.getTopCurtain.isShown}])},{default:s(()=>[t(D,{cols:"4"},{default:s(()=>[t(R,{elevation:"0"},{cardTitle:s(()=>{var i,r;return[d(c(((r=(i=e.orderDetails)==null?void 0:i.customer)==null?void 0:r.name)||"Name data unavailable"),1)]}),cardContent:s(()=>[t(v,null,{default:s(()=>[t(C,{title:"Shipping Address"},{itemContent:s(()=>[t(B,{"shipping-address":e.orderDetails.shippingAddress},null,8,["shipping-address"])]),_:1}),t(C,{title:"Contact Info"},{itemContent:s(()=>{var i,r,y,g,b,S;return[a("ul",fe,[a("li",_e,[t(T,{class:"mr-2 icon-16",color:"primary"},{default:s(()=>[d(" $circlePhone ")]),_:1}),d(" "+c(((r=(i=e.orderDetails)==null?void 0:i.customer)==null?void 0:r.phoneNumber)||"Phone data unavailable"),1)]),a("li",Ce,[t(T,{class:"mr-2 icon-16",color:"primary"},{default:s(()=>[d(" $at ")]),_:1}),a("a",{href:`mailto:${((g=(y=e.orderDetails)==null?void 0:y.customer)==null?void 0:g.email)||"#"} `},c(((S=(b=e.orderDetails)==null?void 0:b.customer)==null?void 0:S.email)||"Email data unavailable"),9,ye)])])]}),_:1})]),_:1}),t(v,{align:"end"},{default:s(()=>[t(C,{title:"Payment"},{itemContent:s(()=>{var i,r;return[t(N,{"card-number":(i=e.orderDetails.payment.card)==null?void 0:i.pan,"card-type":(r=e.orderDetails.payment.card)==null?void 0:r.issuer,"payment-type":e.orderDetails.payment.type},null,8,["card-number","card-type","payment-type"])]}),_:1}),t(ae),t(C,null,{itemContent:s(()=>[a("ul",ge,[a("li",be,[o.machineTypeIsRefundEligible?(p(),h(P,{key:0,size:"large",class:"ml-4 text-body-4",onClick:o.handleReceiptClick},{default:s(()=>[t(T,{class:"mr-2 text-body-1"},{default:s(()=>[d(" $paperPlane ")]),_:1}),d(" Send Receipt ")]),_:1},8,["onClick"])):f("",!0)])])]),_:1})]),_:1})]),_:1})]),_:1}),t(w,{vertical:""}),t(D,{cols:"4"},{default:s(()=>[t(R,{elevation:"0"},{cardContent:s(()=>[t(v,{class:"mb-5"},{default:s(()=>[t(C,{title:"Transaction Date"},{itemContent:s(()=>[a("h3",Se,c(o.transactionDate.toUpperCase()),1)]),_:1})]),_:1}),t(v,{align:"end"},{default:s(()=>[t(C,{title:"Transaction Location"},{itemContent:s(()=>{var i,r,y,g,b,S;return[a("ul",De,[a("li",null,[a("a",ve,c(((r=(i=e.orderDetails)==null?void 0:i.session)==null?void 0:r.kioskNumber)||"Kiosk number unavailable"),1)]),a("li",Te,c(((g=(y=e.orderDetails)==null?void 0:y.session)==null?void 0:g.storeName)||"Store name unavailable"),1),a("li",null,c(((S=(b=e.orderDetails)==null?void 0:b.session)==null?void 0:S.storeAddress)||"Store Address unavailable"),1)])]}),_:1})]),_:1})]),_:1})]),_:1}),t(w,{vertical:""}),t(D,{cols:"4"},{default:s(()=>[t(F,{class:"pa-0",elevation:"0"})]),_:1})]),_:1},8,["class"])),t(w,{class:k({"blur-overlay-active":e.getTopCurtain.isShown})},null,8,["class"])]),a("div",{class:k(["screen-item bottom flex-grow-1 mx-2",{"blur-overlay-active":e.getTopCurtain.isShown}])},[t(A,{class:"fill-height","no-gutters":""},{default:s(()=>[t(D,{cols:"8",class:"d-flex flex-column pr-1 position-relative list-container"},{default:s(()=>[a("div",we,[t(L,{refundable:u.refundable},null,8,["refundable"])])]),_:1}),o.machineTypeIsRefundEligible?(p(),h(D,{key:0,cols:"4",class:"position-relative form-container"},{default:s(()=>[t(O,null,{default:s(()=>[e.selectedItems.length>0?(p(),h(oe,{key:0,color:"surface-light",class:"overflow-container visible details-form"},{default:s(()=>[t(x,{class:"position-relative fill-height",onRefunded:m[0]||(m[0]=i=>o.handleRefundConfirmed(i))})]),_:1})):f("",!0)]),_:1}),t(O,null,{default:s(()=>[l.isSuccessAnimationShown?(p(),h(ie,{key:0,color:"transparent",class:"fill-height position-relative elevation-0 d-flex flex-column justify-center align-center"},{default:s(()=>[t(M,{class:"position-relative w-100 top-n10","icon-primary":"$duoToneCircleDollar",onAnimationComplete:o.handleAnimationComplete},{message:s(()=>[a("div",ke,[a("span",Re,c(e.$filters.currency(l.refundTotal)),1),d(" has been "),Ie,d(" to "),a("span",Ae,c(e.orderDetails.customer.name),1),d(". ")])]),_:1},8,["onAnimationComplete"])]),_:1})):f("",!0)]),_:1})]),_:1})):f("",!0)]),_:1})],2)])):f("",!0)]),_:1})}const Ze=j(me,[["render",Oe],["__scopeId","data-v-5aa76522"]]);export{Ze as default};
