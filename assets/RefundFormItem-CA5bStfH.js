import{m as _}from"./vuex-BwOdvJvI.js";import{_ as b,l as R}from"./index-AG15HfzG.js";import{O as x,w as c,i as I,a0 as q,l as N,t as k,v as w,x as v,p as C,D as y,q as O,ah as B}from"./vuetify-BymGJ7fC.js";import{b as h,e as r,i as s,C as d,s as p,B as V,H as i,J as f,F as Q,g as S,p as D,A as n}from"./@vue-mGKKYCuj.js";import"./date-fns-Cq_iz7V_.js";import"./@babel-BTTPuEuv.js";import"./vue-component-docs-plugin-CX_tIU2Y.js";import"./vue-router-CgUA7A7W.js";import"./axios-xsH4HHeE.js";import"./axios-cache-interceptor-DgAMPFM2.js";import"./cache-parser-DXYp_BCq.js";import"./fast-defer-9MI9za_P.js";import"./object-code-SBtdq8jY.js";import"./@fortawesome-C0fAH5tI.js";import"./@awesome.me-Btqfd-fw.js";const T={props:{itemId:{type:Number,required:!0},amount:{type:Number,default:null},quantity:{type:Number,default:null},notes:{type:String,default:""},reason:{type:String,default:""},showReason:{type:Boolean,default:!1}},emits:["update:quantity","update:reason","update:notes"],data(){return{reasonOptions:R,reasonRules:[e=>!!e||"Reason required"],notesRules:[e=>!!e||"Notes required"],quantityOptions:[]}},computed:{..._({environment:"app/getEnvConfigs"}),orderItem(){return this.$store.state.order.selectedItems.find(({itemId:e})=>e===this.itemId)},selectedQuantity:{get(){return this.quantity},set(e){this.$emit("update:quantity",e)}},selectedReason:{get(){return this.reason},set(e){this.$emit("update:reason",e),e!=="Other"&&(this.refundNotes="")}},refundNotes:{get(){return this.notes},set(e){this.$emit("update:notes",e)}}},mounted(){const e=(this.orderItem.refunds||[]).reduce((u,m)=>u+m.quantity,0),a=this.orderItem.quantity-e;this.selectedQuantity=a,this.quantityOptions=Array.from({length:a},(u,m)=>m+1)}},U={class:"refund-form-item mt-4"},A={class:"mb-0 text-primary-lighten-1"},E={class:"text-body-4 font-weight-medium text-no-wrap ml-1"};function F(e,a,u,m,o,t){return n(),h("div",U,[r(v,{align:"center",class:"mb-0"},{default:s(()=>[t.orderItem.type!=="DN"?(n(),d(c,{key:0,cols:"3",class:"d-flex flex-column align-center justify-center"},{default:s(()=>[r(x,{src:e.environment.skuImageBaseUrl+t.orderItem.sku,width:"65px",class:"mb-3",cover:"",alt:`${t.orderItem.description} image`},null,8,["src","alt"]),V("p",A,i(t.orderItem.sku),1)]),_:1})):p("",!0),t.orderItem.type==="DN"?(n(),d(c,{key:1,cols:"3"})):p("",!0),r(c,{cols:"6"},{default:s(()=>[f(i(t.orderItem.description),1)]),_:1}),r(I),r(q,{disabled:o.quantityOptions.length<=1},{activator:s(({props:l})=>[r(w,D(l,{color:"primary",size:"small","append-icon":o.quantityOptions.length>1?"$dropdown":void 0}),{default:s(()=>[f(i(t.selectedQuantity),1)]),_:2},1040,["append-icon"])]),default:s(()=>[r(N,null,{default:s(()=>[r(k,null,{default:s(()=>[(n(!0),h(Q,null,S(o.quantityOptions,l=>(n(),d(B,{key:l,modelValue:t.selectedQuantity,"onUpdate:modelValue":a[0]||(a[0]=g=>t.selectedQuantity=g),value:l,"hide-details":"",color:"primary",inline:"",density:"compact"},{label:s(()=>[V("span",E,i(l),1)]),_:2},1032,["modelValue","value"]))),128))]),_:1})]),_:1})]),_:1},8,["disabled"]),r(c,{class:"d-flex justify-center"},{default:s(()=>[f(i(e.$filters.currency(u.amount)),1)]),_:1})]),_:1}),r(y,null,{default:s(()=>[u.showReason?(n(),d(C,{key:0,modelValue:t.selectedReason,"onUpdate:modelValue":a[1]||(a[1]=l=>t.selectedReason=l),rules:o.reasonRules,items:o.reasonOptions,label:"Reason",variant:"outlined",density:"compact","bg-color":"white",color:"primary-lighten-2",class:"mb-4"},null,8,["modelValue","rules","items"])):p("",!0)]),_:1}),r(y,null,{default:s(()=>[t.selectedReason==="Other"?(n(),d(O,{key:0,modelValue:t.refundNotes,"onUpdate:modelValue":a[2]||(a[2]=l=>t.refundNotes=l),rules:o.notesRules,autofocus:"","bg-color":"white",rows:"3"},null,8,["modelValue","rules"])):p("",!0)]),_:1})])}const te=b(T,[["render",F]]);export{te as default};
