import{a as g,b as d}from"./vuex.0eb68a2c.js";import{_ as h}from"./index.8a58b007.js";import{ae as f,o as V,l as b}from"./vuetify.65d833ec.js";import{S as m,e as k,x,k as n,g as o,E as y,J as u}from"./@vue.ee679632.js";import"./date-fns.d38e1d55.js";import"./vue-atomic-docs.4f3653eb.js";import"./vue-router.ec64e966.js";import"./axios.eca6faa7.js";import"./axios-cache-interceptor.0956cad0.js";import"./cache-parser.124ebbb8.js";import"./fast-defer.b34f24de.js";import"./object-code.c2755e43.js";import"./@fortawesome.2cecc5e3.js";import"./@awesome.me.7dae7d79.js";const U={props:{sessionId:{type:String,required:!0},assignedTo:{type:String,required:!1,default:""}},emits:["order-assigned","assign-complete"],data(){return{expanded:!1,selected:void 0,notes:void 0,isValid:!1,required:[e=>!!e||"Required"]}},computed:{...g("user",["user"]),loggedInUsername(){return this.user.username},assignedToMe(){return this.assignedTo===this.loggedInUsername},checkbox(){return{label:this.assignedToMe?"Unassign from me":"Assign to me",value:this.assignedToMe?"unassign":this.loggedInUsername}}},methods:{...d("order",["submitAssignUser"]),...d("orders",["fetchAllOrders"]),async assignUser(){try{let e=null;this.selected!=="unassign"&&(e=this.selected),await this.submitAssignUser({assignee:e,sessionId:this.sessionId,notes:this.notes}),await this.fetchAllOrders(),this.$emit("order-assigned",!0),this.selected==="unassign"?this.message="Order unassigned successfully":this.message="Order assigned successfully to you",setTimeout(()=>{this.$emit("assign-complete")},1e3),this.$store.dispatch("app/setSnackbar",{message:this.message}),this.selected=void 0}catch(e){this.$emit("order-assigned",!1),this.$store.dispatch("app/setSnackbar",{message:e.message,color:"error"}),this.selected=void 0}}}},_={class:"text-right"};function v(e,s,S,T,t,a){const c=m("VBtnSecondary"),p=m("VBtnPrimary");return k(),x(b,{modelValue:t.isValid,"onUpdate:modelValue":s[3]||(s[3]=i=>t.isValid=i),class:"assign-order"},{default:n(()=>{var i,l;return[o(f,{modelValue:t.selected,"onUpdate:modelValue":s[0]||(s[0]=r=>t.selected=r),label:(i=a.checkbox)==null?void 0:i.label,value:(l=a.checkbox)==null?void 0:l.value,color:"primary","hide-details":"",rules:t.required},null,8,["modelValue","label","value","rules"]),o(V,{modelValue:t.notes,"onUpdate:modelValue":s[1]||(s[1]=r=>t.notes=r),label:"Notes",placeholder:"Optional"},null,8,["modelValue"]),y("div",_,[o(c,{class:"mr-4",onClick:s[2]||(s[2]=r=>e.$emit("assign-complete"))},{default:n(()=>[u(" Cancel ")]),_:1}),o(p,{id:"menu-activator",disabled:!t.isValid,onClick:a.assignUser},{default:n(()=>[u(" Submit ")]),_:1},8,["disabled","onClick"])])]}),_:1},8,["modelValue"])}const R=h(U,[["render",v]]);export{R as default};
