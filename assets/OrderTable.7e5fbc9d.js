import{a as x,c as U,b as j}from"./vuex.0eb68a2c.js";import{P as K,c as R,e as z,_ as q}from"./index.8a58b007.js";import E from"./UserAvatar.ff6b25f1.js";import G from"./ActionMenu.9b302073.js";import J from"./AssignOrder.d99f2a00.js";import L from"./StageChip.18205d71.js";import X from"./ProductImageKioskNumber.a237bccc.js";import Y from"./MeruDataTable.80a372ee.js";import{S as c,e as l,f as u,g as n,k as r,x as y,s as H,z as C,I as h,E as p,G as S,j as v,J as k,F as Q,aj as W,ak as Z}from"./@vue.ee679632.js";import{x as $,w as O,ad as ee,ae as w,a6 as te,X as se,v as re}from"./vuetify.65d833ec.js";import{f as V,p as D}from"./date-fns.d38e1d55.js";import"./vue-atomic-docs.4f3653eb.js";import"./vue-router.ec64e966.js";import"./axios.eca6faa7.js";import"./axios-cache-interceptor.0956cad0.js";import"./cache-parser.124ebbb8.js";import"./fast-defer.b34f24de.js";import"./object-code.c2755e43.js";import"./@fortawesome.2cecc5e3.js";import"./@awesome.me.7dae7d79.js";const ae={components:{UserAvatar:E,ActionMenu:G,AssignOrder:J,StageChip:L,PaymentType:K,ProductImageKioskNumber:X,MeruDataTable:Y},expose:["resetFilters"],props:{orders:{type:Array,required:!0}},data(){return{selectedId:-1,multiSearch:{stage:[],assigneeUsername:[]},sortBy:[{key:"timestamp",order:"desc"}],headers:[{key:"stage",title:"Stage"},{key:"transactionId",title:"Transaction ID"},{key:"kioskNumber",title:"Kiosk #",width:50},{key:"timestamp",title:"Date"},{key:"email",title:"Email"},{key:"name",title:"Name"},{key:"amount",title:"Amount"},{key:"paymentType",title:"Payment Type"},{key:"assigneeUsername",title:"",sortable:!1}]}},computed:{...x("user",["user"]),...x("order",["orderDetails"]),loggedInUserName(){return this.user.username},hasActiveFilters(){return Object.values(this.multiSearch).some(s=>s.length>0)},filteredData(){return Object.keys(this.multiSearch).length?this.orders.filter(s=>Object.entries(this.multiSearch).every(([t,m])=>{if(m.length===0)return!0;if(Array.isArray(m))return t==="assigneeUsername"?m.includes(s[t])||m.includes("unassigned")&&!s[t]:m.includes(s[t])})):this.orders},limitSelectionText(){return"+ "+(this.multiSearch.stage.length-2)+" others"}},methods:{getOrderStageColor:R,getOrderStageName:z,...U("order",["setActiveOrder","setOrderDetails"]),...U("app",["setCardDrawer","resetCardDrawer"]),...j("order",["fetchOrderDetails"]),autoCompleteItems(s){return[...new Set(this.orders.map(o=>o[s]))].filter(o=>o!==void 0).map(o=>{let i=o;return s==="stage"&&(i=this.getOrderStageName(o)),{title:i,value:o}})},removeActiveFilter(s,t){this.multiSearch[s].splice(t,1)},resetFilters(){this.multiSearch={stage:[],assigneeUsername:[]}},async setActiveRow(s,t){t=t.item,this.resetCardDrawer();let m=["OrderCardDetails","CustomerCard","OrderCardTracking"];this.setActiveOrder(null),this.setOrderDetails(null),this.setActiveOrder(t),await this.fetchOrderDetails(t.sessionId).then(o=>{var i;(i=o==null?void 0:o.items)!=null&&i.some(a=>a.type==="CK")&&m.splice(1,0,"KeySkuCard")}),this.setCardDrawer({isShown:!0,components:m,headerVariant:"order",secondaryComponents:["OrderActivity"]})},formatDate(s){return V(D(s),"MM/dd/yyyy")},formatTime(s){return V(D(s),"h:mm a")},assignMenuTitle(s){return s?`Assigned To: ${s==null?void 0:s.toUpperCase()}`:"Unassigned"}}},A=s=>(W("data-v-e8a01951"),s=s(),Z(),s),ie=A(()=>p("p",{class:"font-weight-bold mr-2"}," Filter Results: ",-1)),ne={key:1,class:"text-primary-darken-2 text-caption align-self-center"},oe=A(()=>p("span",{class:"text-body-4 font-weight-bold"},"Orders Assigned to Me",-1)),le=A(()=>p("span",{class:"text-body-4 font-weight-bold"},"Unassigned Orders",-1)),me={class:"font-weight-bold"},ue={key:0},de={key:1};function ce(s,t,m,o,i,a){const _=c("StageChip"),T=c("ProductImageKioskNumber"),I=c("PaymentType"),N=c("UserAvatar"),F=c("AssignOrder"),M=c("ActionMenu"),P=c("MeruDataTable");return l(),u("div",null,[n(P,{"sort-by":i.sortBy,"onUpdate:sortBy":t[6]||(t[6]=e=>i.sortBy=e),headers:i.headers,items:a.filteredData,class:"elevation-0 on-surface-high-contrast-text","items-per-page":"-1","hide-default-footer":"","onClick:row":a.setActiveRow},{top:r(()=>[n($,{class:"bg-surface-variant px-4 ma-0 py-sm-2 pt-4",justify:"start",align:"center","no-gutters":""},{default:r(()=>[n(O,{cols:"12",sm:"5",class:"d-flex align-center pr-sm-4"},{default:r(()=>[ie,n(ee,{modelValue:i.multiSearch.stage,"onUpdate:modelValue":t[0]||(t[0]=e=>i.multiSearch.stage=e),items:a.autoCompleteItems("stage"),label:"Stage","bg-color":"surface",variant:"outlined",density:"compact","hide-details":"",clearable:"",multiple:"",chips:""},{chip:r(({props:e,item:d,index:f})=>[f<2?(l(),y(_,H({key:0},e,{stage:d.value}),null,16,["stage"])):C("",!0),f===2&&i.multiSearch.stage.length?(l(),u("span",ne,h(a.limitSelectionText),1)):C("",!0)]),_:1},8,["modelValue","items"])]),_:1}),n(O,{cols:"12",sm:"7",class:"d-flex align-center"},{default:r(()=>[n(w,{modelValue:i.multiSearch.assigneeUsername,"onUpdate:modelValue":t[1]||(t[1]=e=>i.multiSearch.assigneeUsername=e),value:a.loggedInUserName,"hide-details":"",color:"primary",multiple:"",inline:""},{label:r(()=>[oe]),_:1},8,["modelValue","value"]),n(w,{modelValue:i.multiSearch.assigneeUsername,"onUpdate:modelValue":t[2]||(t[2]=e=>i.multiSearch.assigneeUsername=e),value:"unassigned","hide-details":"",color:"primary",multiple:"",inline:""},{label:r(()=>[le]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(te,null,{default:r(()=>[a.hasActiveFilters?(l(),y(se,{key:0,class:"d-flex pa-4 align-center",color:"surface-light"},{default:r(()=>[p("a",{role:"button",class:"mr-4 text-capitalize text-info text-decoration-underline font-weight-medium",onClick:t[3]||(t[3]=(...e)=>a.resetFilters&&a.resetFilters(...e))}," Clear Filters "),(l(!0),u(S,null,v(i.multiSearch,(e,d,f)=>(l(),u("div",{key:f},[d==="stage"?(l(!0),u(S,{key:0},v(e,(b,g)=>(l(),y(_,{key:g,stage:b,"append-icon":"fas fa-circle-xmark",class:"mr-4",onClick:B=>a.removeActiveFilter(d,g)},null,8,["stage","onClick"]))),128)):(l(!0),u(S,{key:1},v(e,(b,g)=>(l(),y(re,{key:g,size:"small","append-icon":"fas fa-circle-xmark",class:"mr-4",color:"teal",onClick:B=>a.removeActiveFilter(d,g)},{default:r(()=>[k(h(b),1)]),_:2},1032,["onClick"]))),128))]))),128))]),_:1})):C("",!0)]),_:1})]),["item.stage"]:r(({item:e})=>[n(_,{stage:e.stage},null,8,["stage"])]),["item.kioskNumber"]:r(({item:e})=>[n(T,{"kiosk-number":e.kioskNumber,status:e.processorStatus,"product-color-one":"#1e5799","product-color-two":"#7db9e8"},null,8,["kiosk-number","status"])]),["item.amount"]:r(({item:e})=>[k(h(s.$filters.currency(e.amount)),1)]),["item.timestamp"]:r(({item:e})=>[p("span",me,h(a.formatDate(e.timestamp)),1),k(" "+h(a.formatTime(e.timestamp)),1)]),["item.paymentType"]:r(({item:e})=>[n(I,{"card-number":e.pan,"layout-type":"chip","pan-length":"truncated","payment-type":e.paymentType},null,8,["card-number","payment-type"])]),["item.assigneeUsername"]:r(({item:e})=>[n(M,{title:a.assignMenuTitle(e.assigneeUsername),class:"d-inline-block",onClick:t[4]||(t[4]=Q(()=>{},["stop"]))},{activator:r(()=>[n(N,{"user-name":e.assigneeUsername,class:"d-inline-block"},null,8,["user-name"])]),content:r(({closeMenu:d})=>[n(F,{"session-id":e.sessionId,"assigned-to":e.assigneeUsername,onAssignComplete:d},null,8,["session-id","assigned-to","onAssignComplete"])]),_:2},1032,["title"])]),"no-data":r(()=>[a.hasActiveFilters?(l(),u("div",ue,[k(" No Filter Results. "),p("a",{role:"button",class:"ml-2 text-capitalize text-info text-decoration-underline font-weight-bold",onClick:t[5]||(t[5]=(...e)=>a.resetFilters&&a.resetFilters(...e))}," Clear Filters ")])):(l(),u("p",de," No Orders Found "))]),_:2},1032,["sort-by","headers","items","onClick:row"])])}const Ne=q(ae,[["render",ce],["__scopeId","data-v-e8a01951"]]);export{Ne as default};
