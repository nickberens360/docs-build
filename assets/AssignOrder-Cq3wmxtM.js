import{b as d,m as g}from"./vuex-D3TwipD2.js";import{_ as f}from"./index-LK9MQE2L.js";import{ah as h,q as V,n as b}from"./vuetify-BgnNF2O3.js";import{C as y,i as a,e as o,B as k,J as m,_ as u,A as x}from"./@vue-DNrUJgob.js";import"./date-fns-2ylUqVpG.js";import"./@babel-BTTPuEuv.js";import"./vue-component-docs-plugin-BnqcuvvC.js";import"./vue-router-BVOKdCCq.js";import"./axios-xsH4HHeE.js";import"./axios-cache-interceptor-DgAMPFM2.js";import"./cache-parser-DXYp_BCq.js";import"./fast-defer-9MI9za_P.js";import"./object-code-SBtdq8jY.js";import"./@fortawesome-BWcQmPY7.js";import"./@awesome.me-Btqfd-fw.js";const U={props:{sessionId:{type:String,required:!0},assignedTo:{type:String,required:!1,default:""}},emits:["order-assigned","assign-complete"],data(){return{expanded:!1,selected:void 0,notes:void 0,isValid:!1,required:[s=>!!s||"Required"]}},computed:{...g("user",["user"]),loggedInUsername(){return this.user.username},assignedToMe(){return this.assignedTo===this.loggedInUsername},checkbox(){return{label:this.assignedToMe?"Unassign from me":"Assign to me",value:this.assignedToMe?"unassign":this.loggedInUsername}}},methods:{...d("order",["submitAssignUser"]),...d("orders",["fetchAllOrders"]),async assignUser(){try{let s=null;this.selected!=="unassign"&&(s=this.selected),await this.submitAssignUser({assignee:s,sessionId:this.sessionId,notes:this.notes}),await this.fetchAllOrders(),this.$emit("order-assigned",!0),this.selected==="unassign"?this.message="Order unassigned successfully":this.message="Order assigned successfully to you",setTimeout(()=>{this.$emit("assign-complete")},1e3),this.$store.dispatch("app/setSnackbar",{message:this.message}),this.selected=void 0}catch(s){this.$emit("order-assigned",!1),this.$store.dispatch("app/setSnackbar",{message:s.message,color:"error"}),this.selected=void 0}}}},_={class:"text-right"};function v(s,e,A,B,t,n){const p=u("VBtnSecondary"),c=u("VBtnPrimary");return x(),y(b,{modelValue:t.isValid,"onUpdate:modelValue":e[3]||(e[3]=i=>t.isValid=i),class:"assign-order"},{default:a(()=>{var i,l;return[o(h,{modelValue:t.selected,"onUpdate:modelValue":e[0]||(e[0]=r=>t.selected=r),label:(i=n.checkbox)==null?void 0:i.label,value:(l=n.checkbox)==null?void 0:l.value,color:"primary","hide-details":"",rules:t.required},null,8,["modelValue","label","value","rules"]),o(V,{modelValue:t.notes,"onUpdate:modelValue":e[1]||(e[1]=r=>t.notes=r),label:"Notes",placeholder:"Optional"},null,8,["modelValue"]),k("div",_,[o(p,{class:"mr-4",onClick:e[2]||(e[2]=r=>s.$emit("assign-complete"))},{default:a(()=>e[4]||(e[4]=[m(" Cancel ")])),_:1,__:[4]}),o(c,{id:"menu-activator",disabled:!t.isValid,onClick:n.assignUser},{default:a(()=>e[5]||(e[5]=[m(" Submit ")])),_:1,__:[5]},8,["disabled","onClick"])])]}),_:1},8,["modelValue"])}const z=f(U,[["render",v]]);export{z as default};
