import{u as q,b as A}from"./vue-router-BVOKdCCq.js";import{r as d,w as p,o as B}from"./@vue-DNrUJgob.js";function Q(P={}){const{initialFilters:u={},initialSortBy:m=[],initialPagination:v={}}=P,f=q(),O=A(),a=d({...u}),o=d(m),s=d({...v});return p([a,o,s],y,{deep:!0}),p(()=>f.query,()=>{g()},{deep:!0}),B(()=>{g(),y()}),{filters:a,sortBy:o,pagination:s,updateQuery:y};function g(){const r=f.query;Object.keys(u).forEach(e=>{const n=`filters[${e}]`;if(r[n]!==void 0){const i=r[n];Array.isArray(u[e])?a.value[e]=Array.isArray(i)?i:[i]:typeof u[e]=="boolean"?a.value[e]=i==="true":a.value[e]=i}}),r.sortBy&&r.sortOrder&&(o.value=[{key:r.sortBy,order:r.sortOrder}]),r.page&&(s.value.page=r.page),r.itemsPerPage&&(s.value.itemsPerPage=r.itemsPerPage)}function y(){var n,i;const r={...f.query},e={...r};if(Object.entries(a.value).forEach(([c,t])=>{const l=`filters[${c}]`;Array.isArray(t)?t.length>0?e[l]=t:delete e[l]:t!==""&&t!==null&&t!==void 0?e[l]=t.toString():delete e[l]}),o.value.length>0){const{key:c,order:t}=o.value[0];e.sortBy=c,e.sortOrder=t}else delete e.sortBy,delete e.sortOrder;(n=s.value)!=null&&n.page&&(e.page=s.value.page),(i=s.value)!=null&&i.itemsPerPage&&(e.itemsPerPage=s.value.itemsPerPage),JSON.stringify(r)!==JSON.stringify(e)&&O.replace({query:e})}}export{Q as u};
