import{d as z,r as w,V as P,w as j,a2 as V,t as ke,b as Q,s as we,A as ee,B as te,j as re,p as be,c as F,a3 as xe,k as je,l as Re,o as Ce,a4 as S,W as B}from"./@vue-DNrUJgob.js";(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".mapdiv[data-v-174b771e]{width:100%;height:100%}.info-window-wrapper[data-v-90174664]{display:none}.mapdiv .info-window-wrapper[data-v-90174664]{display:inline-block}.custom-marker-wrapper[data-v-2d2d343a]{display:none}.mapdiv .custom-marker-wrapper[data-v-2d2d343a]{display:inline-block}")),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var qe=Object.defineProperty,Ze=(o,e,t)=>e in o?qe(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,ne=(o,e,t)=>(Ze(o,typeof e!="symbol"?e+"":e,t),t);const G=Symbol("map"),W=Symbol("api"),_e=Symbol("marker"),Me=Symbol("markerCluster"),K=Symbol("CustomMarker"),Be=Symbol("mapTilesLoaded"),Ee=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ne(o,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(c){try{h(r.next(c))}catch(u){a(u)}}function n(c){try{h(r.throw(c))}catch(u){a(u)}}function h(c){c.done?i(c.value):s(c.value).then(l,n)}h((r=r.apply(o,[])).next())})}var ze=function o(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!o(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;for(s=r;s--!==0;){var a=i[s];if(!o(e[a],t[a]))return!1}return!0}return e!==e&&t!==t};const le="__googleMapsScriptId";var A;(function(o){o[o.INITIALIZED=0]="INITIALIZED",o[o.LOADING=1]="LOADING",o[o.SUCCESS=2]="SUCCESS",o[o.FAILURE=3]="FAILURE"})(A||(A={}));class I{constructor({apiKey:e,authReferrerPolicy:t,channel:r,client:s,id:i=le,language:a,libraries:l=[],mapIds:n,nonce:h,region:c,retries:u=3,url:p="https://maps.googleapis.com/maps/api/js",version:f}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=r,this.client=s,this.id=i||le,this.language=a,this.libraries=l,this.mapIds=n,this.nonce=h,this.region=c,this.retries=u,this.url=p,this.version=f,I.instance){if(!ze(this.options,I.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(I.instance.options)}`);return I.instance}I.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?A.FAILURE:this.done?A.SUCCESS:this.loading?A.LOADING:A.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(r=>{r?t(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}const r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(i=>!r[i]&&delete r[i]),!((t=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(i=>{let a,l,n,h="The Google Maps JavaScript API",c="google",u="importLibrary",p="__ib__",f=document,d=window;d=d[c]||(d[c]={});const m=d.maps||(d.maps={}),g=new Set,v=new URLSearchParams,y=()=>a||(a=new Promise((k,x)=>Ne(this,void 0,void 0,function*(){var C;yield l=f.createElement("script"),l.id=this.id,v.set("libraries",[...g]+"");for(n in i)v.set(n.replace(/[A-Z]/g,O=>"_"+O[0].toLowerCase()),i[n]);v.set("callback",c+".maps."+p),l.src=this.url+"?"+v,m[p]=k,l.onerror=()=>a=x(Error(h+" could not load.")),l.nonce=this.nonce||((C=f.querySelector("script[nonce]"))===null||C===void 0?void 0:C.nonce)||"",f.head.append(l)})));m[u]?console.warn(h+" only loads once. Ignoring:",i):m[u]=(k,...x)=>g.add(k)&&y().then(()=>m[u](k,...x))})(r);const s=this.libraries.map(i=>this.importLibrary(i));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),i=>{const a=new ErrorEvent("error",{error:i});this.loadErrorCallback(a)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}function $e(o){return class extends o.OverlayView{constructor(e){super(),ne(this,"element"),ne(this,"opts");const{element:t,...r}=e;this.element=t,this.opts=r,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof o.LatLng?this.opts.position:new o.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;const e=this.element;return e.style.display!=="none"&&e.style.visibility!=="hidden"&&(e.style.opacity===""||Number(e.style.opacity)>.01)}onAdd(){if(!this.element)return;const e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.element)}draw(){if(!this.element)return;const e=this.getProjection(),t=e==null?void 0:e.fromLatLngToDivPixel(this.getPosition());if(t){this.element.style.position="absolute";const r=this.element.offsetHeight,s=this.element.offsetWidth;let i,a;switch(this.opts.anchorPoint){case"TOP_CENTER":i=t.x-s/2,a=t.y;break;case"BOTTOM_CENTER":i=t.x-s/2,a=t.y-r;break;case"LEFT_CENTER":i=t.x,a=t.y-r/2;break;case"RIGHT_CENTER":i=t.x-s,a=t.y-r/2;break;case"TOP_LEFT":i=t.x,a=t.y;break;case"TOP_RIGHT":i=t.x-s,a=t.y;break;case"BOTTOM_LEFT":i=t.x,a=t.y-r;break;case"BOTTOM_RIGHT":i=t.x-s,a=t.y-r;break;default:i=t.x-s/2,a=t.y-r/2}this.element.style.left=i+"px",this.element.style.top=a+"px",this.element.style.transform=`translateX(${this.opts.offsetX||0}px) translateY(${this.opts.offsetY||0}px)`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}onRemove(){this.element&&this.element.remove()}setOptions(e){const{element:t,...r}=e;this.element=t,this.opts=r,this.draw()}}}let ue;const ce=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","heading_changed","idle","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","resize","rightclick","tilesloaded","tilt_changed","zoom_changed"],Ue=z({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1}},emits:ce,setup(o,{emit:e}){const t=w(),r=w(!1),s=w(),i=w(),a=w(!1);B(G,s),B(W,i),B(Be,a);const l=()=>{const u={...o};Object.keys(u).forEach(d=>{u[d]===void 0&&delete u[d]});const p=d=>{var m;return d?{position:(m=i.value)==null?void 0:m.ControlPosition[d]}:{}},f={scaleControlOptions:o.scaleControlStyle?{style:o.scaleControlStyle}:{},panControlOptions:p(o.panControlPosition),zoomControlOptions:p(o.zoomControlPosition),rotateControlOptions:p(o.rotateControlPosition),streetViewControlOptions:p(o.streetViewControlPosition),fullscreenControlOptions:p(o.fullscreenControlPosition),disableDefaultUI:o.disableDefaultUi};return{...u,...f}},n=j([i,s],([u,p])=>{const f=u,d=p;f&&d&&(f.event.addListenerOnce(d,"tilesloaded",()=>{a.value=!0}),setTimeout(n,0))},{immediate:!0}),h=()=>{try{const{apiKey:u,region:p,version:f,language:d,libraries:m}=o;ue=new I({apiKey:u,region:p,version:f,language:d,libraries:m})}catch(u){console.error(u)}},c=u=>{i.value=S(u.maps),s.value=S(new u.maps.Map(t.value,l()));const p=$e(i.value);i.value[K]=p,ce.forEach(d=>{var m;(m=s.value)==null||m.addListener(d,g=>e(d,g))}),r.value=!0;const f=Object.keys(o).filter(d=>!["apiPromise","apiKey","version","libraries","region","language","center","zoom"].includes(d)).map(d=>ke(o,d));j([()=>o.center,()=>o.zoom,...f],([d,m],[g,v])=>{var y,k,x;const{center:C,zoom:O,..._}=l();(y=s.value)==null||y.setOptions(_),m!==void 0&&m!==v&&((k=s.value)==null||k.setZoom(m));const $=!g||d.lng!==g.lng||d.lat!==g.lat;d&&$&&((x=s.value)==null||x.panTo(d))})};return Ce(()=>{o.apiPromise&&o.apiPromise instanceof Promise?o.apiPromise.then(c):(h(),ue.load().then(c))}),V(()=>{var u;a.value=!1,s.value&&((u=i.value)==null||u.event.clearInstanceListeners(s.value))}),{mapRef:t,ready:r,map:s,api:i,mapTilesLoaded:a}}}),se=(o,e)=>{const t=o.__vccOpts||o;for(const[r,s]of e)t[r]=s;return t},De={ref:"mapRef",class:"mapdiv"};function Fe(o,e,t,r,s,i){return ee(),Q("div",null,[te("div",De,null,512),re(o.$slots,"default",je(Re({ready:o.ready,map:o.map,api:o.api,mapTilesLoaded:o.mapTilesLoaded})),void 0,!0)])}const yt=se(Ue,[["render",Fe],["__scopeId","data-v-174b771e"]]);function Ve(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Ge=function o(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!o(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;for(s=r;s--!==0;){var a=i[s];if(!o(e[a],t[a]))return!1}return!0}return e!==e&&t!==t};const R=Ve(Ge),We=o=>o==="Marker",Ke=o=>o===K,Pe=(o,e,t,r)=>{const s=w(),i=P(G,w()),a=P(W,w()),l=P(Me,w()),n=F(()=>!!(l.value&&a.value&&(s.value instanceof a.value.Marker||s.value instanceof a.value[K])));return j([i,t],(h,[c,u])=>{var p,f,d;const m=!R(t.value,u)||i.value!==c;!i.value||!a.value||!m||(s.value?(s.value.setOptions(t.value),n.value&&((p=l.value)==null||p.removeMarker(s.value),(f=l.value)==null||f.addMarker(s.value))):(We(o)?s.value=S(new a.value[o](t.value)):Ke(o)?s.value=S(new a.value[o](t.value)):s.value=S(new a.value[o]({...t.value,map:i.value})),n.value?(d=l.value)==null||d.addMarker(s.value):s.value.setMap(i.value),e.forEach(g=>{var v;(v=s.value)==null||v.addListener(g,y=>r(g,y))})))},{immediate:!0}),V(()=>{var h,c;s.value&&((h=a.value)==null||h.event.clearInstanceListeners(s.value),n.value?(c=l.value)==null||c.removeMarker(s.value):s.value.setMap(null))}),s},he=["animation_changed","click","dblclick","rightclick","dragstart","dragend","drag","mouseover","mousedown","mouseout","mouseup","draggable_changed","clickable_changed","contextmenu","cursor_changed","flat_changed","rightclick","zindex_changed","icon_changed","position_changed","shape_changed","title_changed","visible_changed"],kt=z({name:"Marker",props:{options:{type:Object,required:!0}},emits:he,setup(o,{emit:e,expose:t,slots:r}){const s=ke(o,"options"),i=Pe("Marker",he,s,e);return B(_e,i),t({marker:i}),()=>{var a;return(a=r.default)==null?void 0:a.call(r)}}});Ee.concat(["bounds_changed"]);Ee.concat(["center_changed","radius_changed"]);const de=["closeclick","content_changed","domready","position_changed","visible","zindex_changed"],He=z({inheritAttrs:!1,props:{options:{type:Object,default:()=>({})},modelValue:{type:Boolean}},emits:[...de,"update:modelValue"],setup(o,{slots:e,emit:t,expose:r}){const s=w(),i=w(),a=P(G,w()),l=P(W,w()),n=P(_e,w());let h,c=o.modelValue;const u=F(()=>{var m;return(m=e.default)==null?void 0:m.call(e).some(g=>g.type!==xe)}),p=m=>{c=m,t("update:modelValue",m)},f=m=>{s.value&&(s.value.open({map:a.value,anchor:n.value,...m}),p(!0))},d=()=>{s.value&&(s.value.close(),p(!1))};return Ce(()=>{j([a,()=>o.options],([m,g],[v,y])=>{var k;const x=!R(g,y)||a.value!==v;a.value&&l.value&&x&&(s.value?(s.value.setOptions({...g,content:u.value?i.value:g.content}),n.value||f()):(s.value=S(new l.value.InfoWindow({...g,content:u.value?i.value:g.content})),n.value&&(h=n.value.addListener("click",()=>{f()})),(!n.value||c)&&f(),de.forEach(C=>{var O;(O=s.value)==null||O.addListener(C,_=>t(C,_))}),(k=s.value)==null||k.addListener("closeclick",()=>p(!1))))},{immediate:!0}),j(()=>o.modelValue,m=>{m!==c&&(m?f():d())})}),V(()=>{var m;h&&h.remove(),s.value&&((m=l.value)==null||m.event.clearInstanceListeners(s.value),d())}),r({infoWindow:s,open:f,close:d}),{infoWindow:s,infoWindowRef:i,hasSlotContent:u,open:f,close:d}}}),Xe={key:0,class:"info-window-wrapper"};function Ye(o,e,t,r,s,i){return o.hasSlotContent?(ee(),Q("div",Xe,[te("div",be({ref:"infoWindowRef"},o.$attrs),[re(o.$slots,"default",{},void 0,!0)],16)])):we("",!0)}const wt=se(He,[["render",Ye],["__scopeId","data-v-90174664"]]),pe=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],H=1,q=8;class oe{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");const s=r>>4;if(s!==H)throw new Error(`Got v${s} data when expected v${H}.`);const i=pe[r&15];if(!i)throw new Error("Unrecognized array type.");const[a]=new Uint16Array(e,2,1),[l]=new Uint32Array(e,4,1);return new oe(l,a,i,e)}constructor(e,t=64,r=Float64Array,s){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=pe.indexOf(this.ArrayType),a=e*2*this.ArrayType.BYTES_PER_ELEMENT,l=e*this.IndexArrayType.BYTES_PER_ELEMENT,n=(8-l%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${r}.`);s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,q,e),this.coords=new this.ArrayType(this.data,q+l+n,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(q+a+l+n),this.ids=new this.IndexArrayType(this.data,q,e),this.coords=new this.ArrayType(this.data,q+l+n,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(H<<4)+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return J(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:a,nodeSize:l}=this,n=[0,i.length-1,0],h=[];for(;n.length;){const c=n.pop()||0,u=n.pop()||0,p=n.pop()||0;if(u-p<=l){for(let g=p;g<=u;g++){const v=a[2*g],y=a[2*g+1];v>=e&&v<=r&&y>=t&&y<=s&&h.push(i[g])}continue}const f=p+u>>1,d=a[2*f],m=a[2*f+1];d>=e&&d<=r&&m>=t&&m<=s&&h.push(i[f]),(c===0?e<=d:t<=m)&&(n.push(p),n.push(f-1),n.push(1-c)),(c===0?r>=d:s>=m)&&(n.push(f+1),n.push(u),n.push(1-c))}return h}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:i,nodeSize:a}=this,l=[0,s.length-1,0],n=[],h=r*r;for(;l.length;){const c=l.pop()||0,u=l.pop()||0,p=l.pop()||0;if(u-p<=a){for(let g=p;g<=u;g++)me(i[2*g],i[2*g+1],e,t)<=h&&n.push(s[g]);continue}const f=p+u>>1,d=i[2*f],m=i[2*f+1];me(d,m,e,t)<=h&&n.push(s[f]),(c===0?e-r<=d:t-r<=m)&&(l.push(p),l.push(f-1),l.push(1-c)),(c===0?e+r>=d:t+r>=m)&&(l.push(f+1),l.push(u),l.push(1-c))}return n}}function J(o,e,t,r,s,i){if(s-r<=t)return;const a=r+s>>1;Oe(o,e,a,r,s,i),J(o,e,t,r,a-1,1-i),J(o,e,t,a+1,s,1-i)}function Oe(o,e,t,r,s,i){for(;s>r;){if(s-r>600){const h=s-r+1,c=t-r+1,u=Math.log(h),p=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*p*(h-p)/h)*(c-h/2<0?-1:1),d=Math.max(r,Math.floor(t-c*p/h+f)),m=Math.min(s,Math.floor(t+(h-c)*p/h+f));Oe(o,e,t,d,m,i)}const a=e[2*t+i];let l=r,n=s;for(Z(o,e,r,t),e[2*s+i]>a&&Z(o,e,r,s);l<n;){for(Z(o,e,l,n),l++,n--;e[2*l+i]<a;)l++;for(;e[2*n+i]>a;)n--}e[2*r+i]===a?Z(o,e,r,n):(n++,Z(o,e,n,s)),n<=t&&(r=n+1),t<=n&&(s=n-1)}}function Z(o,e,t,r){X(o,t,r),X(e,2*t,2*r),X(e,2*t+1,2*r+1)}function X(o,e,t){const r=o[e];o[e]=o[t],o[t]=r}function me(o,e,t,r){const s=o-t,i=e-r;return s*s+i*i}const Je={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:o=>o},fe=Math.fround||(o=>e=>(o[0]=+e,o[0]))(new Float32Array(1)),L=2,E=3,Y=4,M=5,Le=6;class Ie{constructor(e){this.options=Object.assign(Object.create(Je),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:r,maxZoom:s}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const a=[];for(let n=0;n<e.length;n++){const h=e[n];if(!h.geometry)continue;const[c,u]=h.geometry.coordinates,p=fe(U(c)),f=fe(D(u));a.push(p,f,1/0,n,-1,1),this.options.reduce&&a.push(0)}let l=this.trees[s+1]=this._createTree(a);t&&console.timeEnd(i);for(let n=s;n>=r;n--){const h=+Date.now();l=this.trees[n]=this._createTree(this._cluster(l,n)),t&&console.log("z%d: %d clusters in %dms",n,l.numItems,+Date.now()-h)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,e[1]));let i=e[2]===180?180:((e[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){const u=this.getClusters([r,s,180,a],t),p=this.getClusters([-180,s,i,a],t);return u.concat(p)}const l=this.trees[this._limitZoom(t)],n=l.range(U(r),D(a),U(i),D(s)),h=l.data,c=[];for(const u of n){const p=this.stride*u;c.push(h[p+M]>1?ge(h,p,this.clusterProps):this.points[h[p+E]])}return c}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),s="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(s);const a=i.data;if(t*this.stride>=a.length)throw new Error(s);const l=this.options.radius/(this.options.extent*Math.pow(2,r-1)),n=a[t*this.stride],h=a[t*this.stride+1],c=i.within(n,h,l),u=[];for(const p of c){const f=p*this.stride;a[f+Y]===e&&u.push(a[f+M]>1?ge(a,f,this.clusterProps):this.points[a[f+E]])}if(u.length===0)throw new Error(s);return u}getLeaves(e,t,r){t=t||10,r=r||0;const s=[];return this._appendLeaves(s,e,t,r,0),s}getTile(e,t,r){const s=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:a,radius:l}=this.options,n=l/a,h=(r-n)/i,c=(r+1+n)/i,u={features:[]};return this._addTileFeatures(s.range((t-n)/i,h,(t+1+n)/i,c),s.data,t,r,i,u),t===0&&this._addTileFeatures(s.range(1-n/i,h,1,c),s.data,i,r,i,u),t===i-1&&this._addTileFeatures(s.range(0,h,n/i,c),s.data,-1,r,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,r.length!==1)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,s,i){const a=this.getChildren(t);for(const l of a){const n=l.properties;if(n&&n.cluster?i+n.point_count<=s?i+=n.point_count:i=this._appendLeaves(e,n.cluster_id,r,s,i):i<s?i++:e.push(l),e.length===r)break}return i}_createTree(e){const t=new oe(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let r=0;r<e.length;r+=this.stride)t.add(e[r],e[r+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,r,s,i,a){for(const l of e){const n=l*this.stride,h=t[n+M]>1;let c,u,p;if(h)c=Se(t,n,this.clusterProps),u=t[n],p=t[n+1];else{const m=this.points[t[n+E]];c=m.properties;const[g,v]=m.geometry.coordinates;u=U(g),p=D(v)}const f={type:1,geometry:[[Math.round(this.options.extent*(u*i-r)),Math.round(this.options.extent*(p*i-s))]],tags:c};let d;h||this.options.generateId?d=t[n+E]:d=this.points[t[n+E]].id,d!==void 0&&(f.id=d),a.features.push(f)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:r,extent:s,reduce:i,minPoints:a}=this.options,l=r/(s*Math.pow(2,t)),n=e.data,h=[],c=this.stride;for(let u=0;u<n.length;u+=c){if(n[u+L]<=t)continue;n[u+L]=t;const p=n[u],f=n[u+1],d=e.within(n[u],n[u+1],l),m=n[u+M];let g=m;for(const v of d){const y=v*c;n[y+L]>t&&(g+=n[y+M])}if(g>m&&g>=a){let v=p*m,y=f*m,k,x=-1;const C=((u/c|0)<<5)+(t+1)+this.points.length;for(const O of d){const _=O*c;if(n[_+L]<=t)continue;n[_+L]=t;const $=n[_+M];v+=n[_]*$,y+=n[_+1]*$,n[_+Y]=C,i&&(k||(k=this._map(n,u,!0),x=this.clusterProps.length,this.clusterProps.push(k)),i(k,this._map(n,_)))}n[u+Y]=C,h.push(v/g,y/g,1/0,C,-1,g),i&&h.push(x)}else{for(let v=0;v<c;v++)h.push(n[u+v]);if(g>1)for(const v of d){const y=v*c;if(!(n[y+L]<=t)){n[y+L]=t;for(let k=0;k<c;k++)h.push(n[y+k])}}}}return h}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,r){if(e[t+M]>1){const a=this.clusterProps[e[t+Le]];return r?Object.assign({},a):a}const s=this.points[e[t+E]].properties,i=this.options.map(s);return r&&i===s?Object.assign({},i):i}}function ge(o,e,t){return{type:"Feature",id:o[e+E],properties:Se(o,e,t),geometry:{type:"Point",coordinates:[Qe(o[e]),et(o[e+1])]}}}function Se(o,e,t){const r=o[e+M],s=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?`${Math.round(r/100)/10}k`:r,i=o[e+Le],a=i===-1?{}:Object.assign({},t[i]);return Object.assign(a,{cluster:!0,cluster_id:o[e+E],point_count:r,point_count_abbreviated:s})}function U(o){return o/360+.5}function D(o){const e=Math.sin(o*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function Qe(o){return(o-.5)*360}function et(o){const e=(180-o*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ie(o,e){var t={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&e.indexOf(r)<0&&(t[r]=o[r]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(o);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(o,r[s])&&(t[r[s]]=o[r[s]]);return t}class b{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class N{constructor({markers:e,position:t}){this.markers=e,t&&(t instanceof google.maps.LatLng?this._position=t:this._position=new google.maps.LatLng(t))}get bounds(){if(this.markers.length===0&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(b.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>b.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(b.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}const tt=(o,e,t,r)=>{const s=Ae(o.getBounds(),e,r);return t.filter(i=>s.contains(b.getPosition(i)))},Ae=(o,e,t)=>{const{northEast:r,southWest:s}=rt(o,e),i=st({northEast:r,southWest:s},t);return ot(i,e)},ve=(o,e,t)=>{const r=Ae(o,e,t),s=r.getNorthEast(),i=r.getSouthWest();return[i.lng(),i.lat(),s.lng(),s.lat()]},rt=(o,e)=>({northEast:e.fromLatLngToDivPixel(o.getNorthEast()),southWest:e.fromLatLngToDivPixel(o.getSouthWest())}),st=({northEast:o,southWest:e},t)=>(o.x+=t,o.y-=t,e.x-=t,e.y+=t,{northEast:o,southWest:e}),ot=({northEast:o,southWest:e},t)=>{const r=t.fromDivPixelToLatLng(e),s=t.fromDivPixelToLatLng(o);return new google.maps.LatLngBounds(r,s)};class Te{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return at(e)}}class it extends Te{constructor(e){var{viewportPadding:t=60}=e,r=ie(e,["viewportPadding"]);super(r),this.viewportPadding=60,this.viewportPadding=t}calculate({markers:e,map:t,mapCanvasProjection:r}){return t.getZoom()>=this.maxZoom?{clusters:this.noop({markers:e}),changed:!1}:{clusters:this.cluster({markers:tt(t,r,e,this.viewportPadding),map:t,mapCanvasProjection:r})}}}const at=o=>o.map(e=>new N({position:b.getPosition(e),markers:[e]}));class nt extends Te{constructor(e){var{maxZoom:t,radius:r=60}=e,s=ie(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new Ie(Object.assign({maxZoom:this.maxZoom,radius:r},s))}calculate(e){let t=!1;const r={zoom:e.map.getZoom()};if(!R(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const s=this.markers.map(i=>{const a=b.getPosition(i);return{type:"Feature",geometry:{type:"Point",coordinates:[a.lng(),a.lat()]},properties:{marker:i}}});this.superCluster.load(s)}return t||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(t=!R(this.state,r)),this.state=r,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(t=>this.transformCluster(t))}transformCluster({geometry:{coordinates:[e,t]},properties:r}){if(r.cluster)return new N({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(i=>i.properties.marker),position:{lat:t,lng:e}});const s=r.marker;return new N({markers:[s],position:b.getPosition(s)})}}class lt extends it{constructor(e){var{maxZoom:t,radius:r=60,viewportPadding:s=60}=e,i=ie(e,["maxZoom","radius","viewportPadding"]);super({maxZoom:t,viewportPadding:s}),this.superCluster=new Ie(Object.assign({maxZoom:this.maxZoom,radius:r},i)),this.state={zoom:-1,view:[0,0,0,0]}}calculate(e){const t={zoom:Math.round(e.map.getZoom()),view:ve(e.map.getBounds(),e.mapCanvasProjection,this.viewportPadding)};let r=!R(this.state,t);if(!R(e.markers,this.markers)){r=!0,this.markers=[...e.markers];const s=this.markers.map(i=>{const a=b.getPosition(i);return{type:"Feature",geometry:{type:"Point",coordinates:[a.lng(),a.lat()]},properties:{marker:i}}});this.superCluster.load(s)}return r&&(this.clusters=this.cluster(e),this.state=t),{clusters:this.clusters,changed:r}}cluster({map:e,mapCanvasProjection:t}){const r={zoom:Math.round(e.getZoom()),view:ve(e.getBounds(),t,this.viewportPadding)};return this.superCluster.getClusters(r.view,r.zoom).map(s=>this.transformCluster(s))}transformCluster({geometry:{coordinates:[e,t]},properties:r}){if(r.cluster)return new N({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(i=>i.properties.marker),position:{lat:t,lng:e}});const s=r.marker;return new N({markers:[s],position:b.getPosition(s)})}}class ut{constructor(e,t){this.markers={sum:e.length};const r=t.map(i=>i.count),s=r.reduce((i,a)=>i+a,0);this.clusters={count:t.length,markers:{mean:s/t.length,sum:s,min:Math.min(...r),max:Math.max(...r)}}}}class ct{render({count:e,position:t},r,s){const i=`<svg fill="${e>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${e}</text>
</svg>`,a=`Cluster of ${e} markers`,l=Number(google.maps.Marker.MAX_ZINDEX)+e;if(b.isAdvancedMarkerAvailable(s)){const h=document.createElement("div");h.innerHTML=i;const c=h.firstElementChild;c.setAttribute("transform","translate(0 25)");const u={map:s,position:t,zIndex:l,title:a,content:c};return new google.maps.marker.AdvancedMarkerElement(u)}const n={position:t,zIndex:l,title:a,icon:{url:`data:image/svg+xml;base64,${btoa(i)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(n)}}function ht(o,e){for(let t in e.prototype)o.prototype[t]=e.prototype[t]}class ae{constructor(){ht(ae,google.maps.OverlayView)}}var T;(function(o){o.CLUSTERING_BEGIN="clusteringbegin",o.CLUSTERING_END="clusteringend",o.CLUSTER_CLICK="click"})(T||(T={}));const dt=(o,e,t)=>{t.fitBounds(e.bounds)};class pt extends ae{constructor({map:e,markers:t=[],algorithmOptions:r={},algorithm:s=new nt(r),renderer:i=new ct,onClusterClick:a=dt}){super(),this.markers=[...t],this.clusters=[],this.algorithm=s,this.renderer=i,this.onClusterClick=a,e&&this.setMap(e)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(r=>{this.addMarker(r,!0)}),t||this.render()}removeMarker(e,t){const r=this.markers.indexOf(e);return r===-1?!1:(b.setMap(e,null),this.markers.splice(r,1),t||this.render(),!0)}removeMarkers(e,t){let r=!1;return e.forEach(s=>{r=this.removeMarker(s,!0)||r}),r&&!t&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,T.CLUSTERING_BEGIN,this);const{clusters:t,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){const s=new Set;for(const a of t)a.markers.length==1&&s.add(a.markers[0]);const i=[];for(const a of this.clusters)a.marker!=null&&(a.markers.length==1?s.has(a.marker)||b.setMap(a.marker,null):i.push(a.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame(()=>i.forEach(a=>b.setMap(a,null)))}google.maps.event.trigger(this,T.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>b.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){const e=new ut(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,t),r.markers.forEach(s=>b.setMap(s,null)),this.onClusterClick&&r.marker.addListener("click",s=>{google.maps.event.trigger(this,T.CLUSTER_CLICK,r),this.onClusterClick(s,r,t)})),b.setMap(r.marker,t)})}}const ye=Object.values(T),bt=z({name:"MarkerCluster",props:{options:{type:Object,default:()=>({})}},emits:ye,setup(o,{emit:e,expose:t,slots:r}){const s=w(),i=P(G,w()),a=P(W,w());return B(Me,s),j(i,()=>{i.value&&(s.value=S(new pt({map:i.value,algorithm:new lt(o.options.algorithmOptions??{}),...o.options})),ye.forEach(l=>{var n;(n=s.value)==null||n.addListener(l,h=>e(l,h))}))},{immediate:!0}),V(()=>{var l;s.value&&((l=a.value)==null||l.event.clearInstanceListeners(s.value),s.value.clearMarkers(),s.value.setMap(null))}),t({markerCluster:s}),()=>{var l;return(l=r.default)==null?void 0:l.call(r)}}}),mt=z({inheritAttrs:!1,props:{options:{type:Object,required:!0}},setup(o,{slots:e,emit:t,expose:r}){const s=w(),i=F(()=>{var n;return(n=e.default)==null?void 0:n.call(e).some(h=>h.type!==xe)}),a=F(()=>({...o.options,element:s.value})),l=Pe(K,[],a,t);return r({customMarker:l}),{customMarkerRef:s,customMarker:l,hasSlotContent:i}}}),ft={key:0,class:"custom-marker-wrapper"};function gt(o,e,t,r,s,i){return o.hasSlotContent?(ee(),Q("div",ft,[te("div",be({ref:"customMarkerRef",style:{cursor:o.$attrs.onClick?"pointer":void 0}},o.$attrs),[re(o.$slots,"default",{},void 0,!0)],16)])):we("",!0)}const xt=se(mt,[["render",gt],["__scopeId","data-v-2d2d343a"]]);export{wt as $,yt as O,bt as R,xt as j,kt as x};
