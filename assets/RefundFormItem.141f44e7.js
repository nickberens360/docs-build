import{a as _}from"./vuex.0eb68a2c.js";import{l as x,_ as R}from"./index.8a58b007.js";import{O as b,w as c,i as I,W as q,v as N,q as k,t as w,x as v,n as C,D as y,o as O,ae as B}from"./vuetify.65d833ec.js";import{e as l,f as h,g as r,k as s,x as d,E as V,I as i,z as p,J as f,s as Q,G as S,j as D}from"./@vue.ee679632.js";import"./date-fns.d38e1d55.js";import"./vue-atomic-docs.4f3653eb.js";import"./vue-router.ec64e966.js";import"./axios.eca6faa7.js";import"./axios-cache-interceptor.0956cad0.js";import"./cache-parser.124ebbb8.js";import"./fast-defer.b34f24de.js";import"./object-code.c2755e43.js";import"./@fortawesome.2cecc5e3.js";import"./@awesome.me.7dae7d79.js";const E={props:{itemId:{type:Number,required:!0},amount:{type:Number,default:null},quantity:{type:Number,default:null},notes:{type:String,default:""},reason:{type:String,default:""},showReason:{type:Boolean,default:!1}},emits:["update:quantity","update:reason","update:notes"],data(){return{reasonOptions:x,reasonRules:[e=>!!e||"Reason required"],notesRules:[e=>!!e||"Notes required"],quantityOptions:[]}},computed:{..._({environment:"app/getEnvConfigs"}),orderItem(){return this.$store.state.order.selectedItems.find(({itemId:e})=>e===this.itemId)},selectedQuantity:{get(){return this.quantity},set(e){this.$emit("update:quantity",e)}},selectedReason:{get(){return this.reason},set(e){this.$emit("update:reason",e),e!=="Other"&&(this.refundNotes="")}},refundNotes:{get(){return this.notes},set(e){this.$emit("update:notes",e)}}},mounted(){const e=(this.orderItem.refunds||[]).reduce((u,m)=>u+m.quantity,0),a=this.orderItem.quantity-e;this.selectedQuantity=a,this.quantityOptions=Array.from({length:a},(u,m)=>m+1)}},T={class:"refund-form-item mt-4"},U={class:"mb-0 text-primary-lighten-1"},j={class:"text-body-4 font-weight-medium text-no-wrap ml-1"};function z(e,a,u,m,o,t){return l(),h("div",T,[r(v,{align:"center",class:"mb-0"},{default:s(()=>[t.orderItem.type!=="DN"?(l(),d(c,{key:0,cols:"3",class:"d-flex flex-column align-center justify-center"},{default:s(()=>[r(b,{src:e.environment.skuImageBaseUrl+t.orderItem.sku,width:"65px",class:"mb-3",cover:"",alt:`${t.orderItem.description} image`},null,8,["src","alt"]),V("p",U,i(t.orderItem.sku),1)]),_:1})):p("",!0),t.orderItem.type==="DN"?(l(),d(c,{key:1,cols:"3"})):p("",!0),r(c,{cols:"6"},{default:s(()=>[f(i(t.orderItem.description),1)]),_:1}),r(I),r(q,{disabled:o.quantityOptions.length<=1},{activator:s(({props:n})=>[r(N,Q(n,{color:"primary",size:"small","append-icon":o.quantityOptions.length>1?"$dropdown":void 0}),{default:s(()=>[f(i(t.selectedQuantity),1)]),_:2},1040,["append-icon"])]),default:s(()=>[r(k,null,{default:s(()=>[r(w,null,{default:s(()=>[(l(!0),h(S,null,D(o.quantityOptions,n=>(l(),d(B,{key:n,modelValue:t.selectedQuantity,"onUpdate:modelValue":a[0]||(a[0]=g=>t.selectedQuantity=g),value:n,"hide-details":"",color:"primary",inline:"",density:"compact"},{label:s(()=>[V("span",j,i(n),1)]),_:2},1032,["modelValue","value"]))),128))]),_:1})]),_:1})]),_:1},8,["disabled"]),r(c,{class:"d-flex justify-center"},{default:s(()=>[f(i(e.$filters.currency(u.amount)),1)]),_:1})]),_:1}),r(y,null,{default:s(()=>[u.showReason?(l(),d(C,{key:0,modelValue:t.selectedReason,"onUpdate:modelValue":a[1]||(a[1]=n=>t.selectedReason=n),rules:o.reasonRules,items:o.reasonOptions,label:"Reason",variant:"outlined",density:"compact","bg-color":"white",color:"primary-lighten-2",class:"mb-4"},null,8,["modelValue","rules","items"])):p("",!0)]),_:1}),r(y,null,{default:s(()=>[t.selectedReason==="Other"?(l(),d(O,{key:0,modelValue:t.refundNotes,"onUpdate:modelValue":a[2]||(a[2]=n=>t.refundNotes=n),rules:o.notesRules,autofocus:"","bg-color":"white",rows:"3"},null,8,["modelValue","rules"])):p("",!0)]),_:1})])}const ee=R(E,[["render",z]]);export{ee as default};
