import{_ as h,o as m}from"./index-AG15HfzG.js";import{C as u,r as f,s as g,w as _,x as y,y as D,z as S}from"./chart.js-DhSGZZEs.js";import{L as x}from"./vue-chartjs-mX4CvVfP.js";import{a as k}from"./chartjs-plugin-annotation-DYYg84GY.js";import{a as L}from"./lodash-es-DUD2eztn.js";import{at as C,am as b}from"./vuetify-BymGJ7fC.js";import{N as I,b as v,C as c,i as z,B as H,_ as B,x as E,A as l}from"./@vue-mGKKYCuj.js";import"./vuex-BwOdvJvI.js";import"./date-fns-Cq_iz7V_.js";import"./@babel-BTTPuEuv.js";import"./vue-component-docs-plugin-CX_tIU2Y.js";import"./vue-router-CgUA7A7W.js";import"./axios-xsH4HHeE.js";import"./axios-cache-interceptor-DgAMPFM2.js";import"./cache-parser-DXYp_BCq.js";import"./fast-defer-9MI9za_P.js";import"./object-code-SBtdq8jY.js";import"./@fortawesome-C0fAH5tI.js";import"./@awesome.me-Btqfd-fw.js";import"./@kurkle-D8fDXNIl.js";u.register(f,g,_,y,D,S,k);const N={components:{LineChart:x},props:{scanId:{type:String,required:!0}},data:()=>({isLoadingScanData:!1,scanData:{shoulder_pos:void 0,end_of_key_pos:void 0,y:[],height:[],maxHeight:0,maxY:0}}),computed:{chartData(){let a=[],e=[];return this.scanData&&(a=this.scanData.y,e.push({label:"Height",data:this.scanData.height})),{labels:a,datasets:e}},chartOptions(){return{layout:{padding:10},elements:{line:{borderWidth:3,borderColor:"#00bcd4",tension:0},point:{pointStyle:!1}},scales:{x:{type:"linear",min:0,max:this.scanData.maxY+.02,ticks:{stepSize:.01}},y:{min:0,max:this.scanData.maxHeight+.05,ticks:{stepSize:.01}}},plugins:{title:{display:!0,text:this.scanId},tooltip:{mode:"index",intersect:!0},annotation:{annotations:[{id:"shoulder_pos",type:"line",scaleID:"x",value:this.scanData.shoulder_pos,endValue:this.scanData.shoulder_pos,borderColor:"red",label:{position:"start",content:"Shoulder",display:!0}},{id:"end_of_key_pos",type:"line",scaleID:"x",value:this.scanData.end_of_key_pos,endValue:this.scanData.end_of_key_pos,borderColor:"red",label:{position:"start",content:"Tip",display:!0}}]}}}}},mounted(){this.fetchScan()},methods:{async fetchScan(){this.isLoadingScanData=!0,this.scanData=void 0;try{const{data:a}=await m.fetchKeyProfile(this.scanId);this.scanData=this.parseScanData(a)}catch(a){console.log(a)}this.isLoadingScanData=!1},parseScanData(a){let e={shoulder_pos:void 0,end_of_key_pos:void 0,y:[],height:[],maxHeight:0,maxY:0};const[d,p]=a.includes("SIGNALS")?a.split(`SIGNALS
`):a.split(`POINTS
`);d.split(`
`).forEach(t=>{const[s,i]=t.split(": ");["shoulder_pos","end_of_key_pos"].includes(s)&&(e[s]=parseFloat(i))});const o=p.split(`
`).map(t=>t.split(" ")),n=o[0].indexOf("y"),r=o[0].indexOf("height");return o.slice(1).forEach(t=>{const s=parseFloat(t[n]),i=parseFloat(t[r]);e.y.push(s),e.height.push(i),s>e.maxY&&(e.maxY=s),i>e.maxHeight&&(e.maxHeight=i)}),e},onResize:L(function(){var a,e;(e=(a=this.$refs.lineChart)==null?void 0:a.chart)==null||e.resize()},300)}};function O(a,e,d,p,o,n){const r=B("LineChart");return I((l(),v("div",{class:E(["scan-graph-home-key",{"scan-graph-home-key--loading":a.isLoadingScanData,"scan-graph-home-key--error":!a.isLoadingScanData&&!a.scanData}])},[a.isLoadingScanData||!a.scanData?(l(),c(b,{key:0,type:"ossein",loading:a.isLoadingScanData,class:"scan-graph-home-key__loader"},{default:z(()=>e[0]||(e[0]=[H("div",{class:"w-100 text-center"}," Failed to load scan data ",-1)])),_:1,__:[0]},8,["loading"])):(l(),c(r,{key:1,ref:"lineChart",data:n.chartData,options:n.chartOptions,class:"scan-graph-home-key__line-chart"},null,8,["data","options"]))],2)),[[C,n.onResize,void 0,{quiet:!0}]])}const aa=h(N,[["render",O],["__scopeId","data-v-01e6316f"]]);export{aa as default};
